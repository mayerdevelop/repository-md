import { EventEmitter, Input, Output, Directive } from '@angular/core';
import { convertToBoolean, isExternalLink, isTypeof } from '../../utils/util';
import * as i0 from "@angular/core";
/**
 * @description
 *
 * O componente `po-page-change-password` é utilizado como template para tela de cadastro ou alteração de senha.
 *
 * Apresenta dicas e regras para senhas mais seguras e também possibilidade de personalizar o redirecionamento para as telas
 * 'esqueceu a senha', 'voltar' e 'entrar no sistema'. Os textos das telas são pré-definidos e imutáveis.
 *
 * A propriedade `p-url-new-password` automatiza a rotina do template e simplifica o processo de cadastro/alteração de senha, bastando
 * definir uma url para POST das informações digitadas pelo usuário.  A flexibilidade e praticidade podem chegar a um nível em que o
 * desenvolvimento da aplicação no *client side* é desprovida de qualquer código-fonte relacionado à rotina de cadastro/alteração de senha.
 * Seu detalhamento para uso pode ser visto logo abaixo em *propriedades*.
 * Caso julgue necessário, pode-se também definir manualmente a rotina do componente.
 *
 * Para que as imagens sejam exibidas corretamente, é necessário incluir o caminho delas ao projeto. Para isso, edite
 * o *assets* no arquivo **angular.json** da aplicação na seguinte ordem:
 * ```
 *   "assets": [
 *     "src/assets",
 *     "src/favicon.ico",
 *     {
 *       "glob": "**\/*",
 *       "input": "node_modules/@po-ui/style/images",
 *       "output": "assets/images"
 *     }
 *   ]
 * ```
 */
export class PoPageChangePasswordBaseComponent {
    constructor() {
        /**
         * @optional
         *
         * @description
         *
         * URL para a ação de retorno da página.
         *
         * > O botão `Voltar` aparece apenas para telas de alteração de senha, ou seja, só aparece se a propriedade `p-hide-current-password` for
         * falsa.
         *
         * @default `/`
         */
        this.urlBack = '/';
        /**
         * @optional
         *
         * @description
         *
         * Função executada ao submeter o form pelo botão salvar.
         *
         * Caso definida essa função, a modal de confirmação não aparece, mas pode ser chamada pelo
         * método `openConfirmation`. Exemplo:
         *
         * ```
         * @ViewChild(PoPageChangePasswordComponent) changePassword: PoPageChangePasswordComponent;
         *
         * onSubmit() {
         *  this.changePassword.openConfirmation();
         * }
         *
         * ```
         * > Esta propriedade será ignorada se for definido valor para a propriedade `p-url-new-password`.
         */
        this.submit = new EventEmitter();
        this._hideCurrentPassword = false;
        this._requirements = [];
        this._urlHome = '/';
    }
    /**
     * @optional
     *
     * @description
     *
     * Esconde o campo `Senha atual` para que o template seja para criação de senha.
     *
     * @default `false`
     */
    set hideCurrentPassword(value) {
        this._hideCurrentPassword = convertToBoolean(value);
    }
    get hideCurrentPassword() {
        return this._hideCurrentPassword;
    }
    /**
     * @optional
     *
     * @description
     *
     * URL para a ação do link `Esqueceu a senha`.
     *
     * A propriedade aceita os seguintes tipos:
     *
     * - **String**: informe uma url externa ou uma rota válida;
     * - **Function**: pode-se customizar a ação. Para esta possilidade basta atribuir:
     * ```
     * <po-page-change-password>
     *      [recovery]="this.myFunc.bind(this)";
     * </po-page-change-password>
     * ```
     *
     * - **PoPageChangePasswordRecovery**: cria-se vínculo automático com o template **po-modal-password-recovery**.
     *   O objeto deve conter a **url** para requisição dos recursos e pode-se definir o **tipo** de modal para recuperação de senha,
     *   **email** para contato e **máscara** do campo de telefone.
     *
     * > Caso não tenha valor o link `Esqueceu a senha` desaparece.
     */
    set recovery(value) {
        this._recovery = value;
        if (isTypeof(value, 'string')) {
            this.recoveryUrlType = isExternalLink(value) ? 'externalLink' : 'internalLink';
        }
    }
    get recovery() {
        return this._recovery;
    }
    /**
     * @optional
     *
     * @description
     *
     * Lista de regras para criação e alteração de senha.
     */
    set requirements(value) {
        this._requirements = value || [];
        this.showRequirements = this._requirements.length > 0;
    }
    get requirements() {
        return this._requirements;
    }
    /**
     * @optional
     *
     * @description
     *
     * URL para a ação do botão `Entrar no sistema` da modal de confirmação que aparece após salvar a senha ou se chamada pelo método
     * `openConfirmation`.
     *
     * @default `/`
     */
    set urlHome(value) {
        this._urlHome = value;
        this.modalAction.action = this.navigateTo.bind(this, this.urlHome);
    }
    get urlHome() {
        return this._urlHome;
    }
}
PoPageChangePasswordBaseComponent.ɵfac = function PoPageChangePasswordBaseComponent_Factory(t) { return new (t || PoPageChangePasswordBaseComponent)(); };
PoPageChangePasswordBaseComponent.ɵdir = /*@__PURE__*/ i0.ɵɵdefineDirective({ type: PoPageChangePasswordBaseComponent, inputs: { logo: ["p-logo", "logo"], secondaryLogo: ["p-secondary-logo", "secondaryLogo"], token: ["p-token", "token"], urlBack: ["p-url-back", "urlBack"], urlNewPassword: ["p-url-new-password", "urlNewPassword"], hideCurrentPassword: ["p-hide-current-password", "hideCurrentPassword"], recovery: ["p-recovery", "recovery"], requirements: ["p-requirements", "requirements"], urlHome: ["p-url-home", "urlHome"] }, outputs: { submit: "p-submit" } });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(PoPageChangePasswordBaseComponent, [{
        type: Directive
    }], null, { logo: [{
            type: Input,
            args: ['p-logo']
        }], secondaryLogo: [{
            type: Input,
            args: ['p-secondary-logo']
        }], token: [{
            type: Input,
            args: ['p-token']
        }], urlBack: [{
            type: Input,
            args: ['p-url-back']
        }], urlNewPassword: [{
            type: Input,
            args: ['p-url-new-password']
        }], submit: [{
            type: Output,
            args: ['p-submit']
        }], hideCurrentPassword: [{
            type: Input,
            args: ['p-hide-current-password']
        }], recovery: [{
            type: Input,
            args: ['p-recovery']
        }], requirements: [{
            type: Input,
            args: ['p-requirements']
        }], urlHome: [{
            type: Input,
            args: ['p-url-home']
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tcGFnZS1jaGFuZ2UtcGFzc3dvcmQtYmFzZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy90ZW1wbGF0ZXMvc3JjL2xpYi9jb21wb25lbnRzL3BvLXBhZ2UtY2hhbmdlLXBhc3N3b3JkL3BvLXBhZ2UtY2hhbmdlLXBhc3N3b3JkLWJhc2UuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFJdkUsT0FBTyxFQUFFLGdCQUFnQixFQUFFLGNBQWMsRUFBRSxRQUFRLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQzs7QUFLOUU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQTJCRztBQUVILE1BQU0sT0FBZ0IsaUNBQWlDO0lBRHZEO1FBNkJFOzs7Ozs7Ozs7OztXQVdHO1FBQ2tCLFlBQU8sR0FBVyxHQUFHLENBQUM7UUF3RTNDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O1dBbUJHO1FBQ2lCLFdBQU0sR0FBc0IsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQVczRCx5QkFBb0IsR0FBWSxLQUFLLENBQUM7UUFFdEMsa0JBQWEsR0FBMkMsRUFBRSxDQUFDO1FBQzNELGFBQVEsR0FBVyxHQUFHLENBQUM7S0F3RmhDO0lBdEZDOzs7Ozs7OztPQVFHO0lBQ0gsSUFBc0MsbUJBQW1CLENBQUMsS0FBYztRQUN0RSxJQUFJLENBQUMsb0JBQW9CLEdBQUcsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDdEQsQ0FBQztJQUVELElBQUksbUJBQW1CO1FBQ3JCLE9BQU8sSUFBSSxDQUFDLG9CQUFvQixDQUFDO0lBQ25DLENBQUM7SUFFRDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztPQXNCRztJQUNILElBQXlCLFFBQVEsQ0FBQyxLQUF1RDtRQUN2RixJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztRQUV2QixJQUFJLFFBQVEsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLEVBQUU7WUFDN0IsSUFBSSxDQUFDLGVBQWUsR0FBRyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDO1NBQ2hGO0lBQ0gsQ0FBQztJQUVELElBQUksUUFBUTtRQUNWLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztJQUN4QixDQUFDO0lBRUQ7Ozs7OztPQU1HO0lBQ0gsSUFBNkIsWUFBWSxDQUFDLEtBQTZDO1FBQ3JGLElBQUksQ0FBQyxhQUFhLEdBQUcsS0FBSyxJQUFJLEVBQUUsQ0FBQztRQUNqQyxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0lBQ3hELENBQUM7SUFDRCxJQUFJLFlBQVk7UUFDZCxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUM7SUFDNUIsQ0FBQztJQUVEOzs7Ozs7Ozs7T0FTRztJQUNILElBQXlCLE9BQU8sQ0FBQyxLQUFhO1FBQzVDLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO1FBQ3RCLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDckUsQ0FBQztJQUNELElBQUksT0FBTztRQUNULE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUN2QixDQUFDOztrSEF2T21CLGlDQUFpQztvRkFBakMsaUNBQWlDO3VGQUFqQyxpQ0FBaUM7Y0FEdEQsU0FBUztnQkFXUyxJQUFJO2tCQUFwQixLQUFLO21CQUFDLFFBQVE7WUFTWSxhQUFhO2tCQUF2QyxLQUFLO21CQUFDLGtCQUFrQjtZQU9QLEtBQUs7a0JBQXRCLEtBQUs7bUJBQUMsU0FBUztZQWNLLE9BQU87a0JBQTNCLEtBQUs7bUJBQUMsWUFBWTtZQXNFVSxjQUFjO2tCQUExQyxLQUFLO21CQUFDLG9CQUFvQjtZQXNCUCxNQUFNO2tCQUF6QixNQUFNO21CQUFDLFVBQVU7WUF5Qm9CLG1CQUFtQjtrQkFBeEQsS0FBSzttQkFBQyx5QkFBeUI7WUErQlAsUUFBUTtrQkFBaEMsS0FBSzttQkFBQyxZQUFZO1lBbUJVLFlBQVk7a0JBQXhDLEtBQUs7bUJBQUMsZ0JBQWdCO1lBa0JFLE9BQU87a0JBQS9CLEtBQUs7bUJBQUMsWUFBWSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEV2ZW50RW1pdHRlciwgSW5wdXQsIE91dHB1dCwgRGlyZWN0aXZlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IFBvTW9kYWxBY3Rpb24gfSBmcm9tICdAcG8tdWkvbmctY29tcG9uZW50cyc7XG5cbmltcG9ydCB7IGNvbnZlcnRUb0Jvb2xlYW4sIGlzRXh0ZXJuYWxMaW5rLCBpc1R5cGVvZiB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWwnO1xuXG5pbXBvcnQgeyBQb1BhZ2VDaGFuZ2VQYXNzd29yZFJlY292ZXJ5IH0gZnJvbSAnLi9pbnRlcmZhY2VzL3BvLXBhZ2UtY2hhbmdlLXBhc3N3b3JkLXJlY292ZXJ5LmludGVyZmFjZSc7XG5pbXBvcnQgeyBQb1BhZ2VDaGFuZ2VQYXNzd29yZFJlcXVpcmVtZW50IH0gZnJvbSAnLi9pbnRlcmZhY2VzL3BvLXBhZ2UtY2hhbmdlLXBhc3N3b3JkLXJlcXVpcmVtZW50LmludGVyZmFjZSc7XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogTyBjb21wb25lbnRlIGBwby1wYWdlLWNoYW5nZS1wYXNzd29yZGAgw6kgdXRpbGl6YWRvIGNvbW8gdGVtcGxhdGUgcGFyYSB0ZWxhIGRlIGNhZGFzdHJvIG91IGFsdGVyYcOnw6NvIGRlIHNlbmhhLlxuICpcbiAqIEFwcmVzZW50YSBkaWNhcyBlIHJlZ3JhcyBwYXJhIHNlbmhhcyBtYWlzIHNlZ3VyYXMgZSB0YW1iw6ltIHBvc3NpYmlsaWRhZGUgZGUgcGVyc29uYWxpemFyIG8gcmVkaXJlY2lvbmFtZW50byBwYXJhIGFzIHRlbGFzXG4gKiAnZXNxdWVjZXUgYSBzZW5oYScsICd2b2x0YXInIGUgJ2VudHJhciBubyBzaXN0ZW1hJy4gT3MgdGV4dG9zIGRhcyB0ZWxhcyBzw6NvIHByw6ktZGVmaW5pZG9zIGUgaW11dMOhdmVpcy5cbiAqXG4gKiBBIHByb3ByaWVkYWRlIGBwLXVybC1uZXctcGFzc3dvcmRgIGF1dG9tYXRpemEgYSByb3RpbmEgZG8gdGVtcGxhdGUgZSBzaW1wbGlmaWNhIG8gcHJvY2Vzc28gZGUgY2FkYXN0cm8vYWx0ZXJhw6fDo28gZGUgc2VuaGEsIGJhc3RhbmRvXG4gKiBkZWZpbmlyIHVtYSB1cmwgcGFyYSBQT1NUIGRhcyBpbmZvcm1hw6fDtWVzIGRpZ2l0YWRhcyBwZWxvIHVzdcOhcmlvLiAgQSBmbGV4aWJpbGlkYWRlIGUgcHJhdGljaWRhZGUgcG9kZW0gY2hlZ2FyIGEgdW0gbsOtdmVsIGVtIHF1ZSBvXG4gKiBkZXNlbnZvbHZpbWVudG8gZGEgYXBsaWNhw6fDo28gbm8gKmNsaWVudCBzaWRlKiDDqSBkZXNwcm92aWRhIGRlIHF1YWxxdWVyIGPDs2RpZ28tZm9udGUgcmVsYWNpb25hZG8gw6Agcm90aW5hIGRlIGNhZGFzdHJvL2FsdGVyYcOnw6NvIGRlIHNlbmhhLlxuICogU2V1IGRldGFsaGFtZW50byBwYXJhIHVzbyBwb2RlIHNlciB2aXN0byBsb2dvIGFiYWl4byBlbSAqcHJvcHJpZWRhZGVzKi5cbiAqIENhc28ganVsZ3VlIG5lY2Vzc8OhcmlvLCBwb2RlLXNlIHRhbWLDqW0gZGVmaW5pciBtYW51YWxtZW50ZSBhIHJvdGluYSBkbyBjb21wb25lbnRlLlxuICpcbiAqIFBhcmEgcXVlIGFzIGltYWdlbnMgc2VqYW0gZXhpYmlkYXMgY29ycmV0YW1lbnRlLCDDqSBuZWNlc3PDoXJpbyBpbmNsdWlyIG8gY2FtaW5obyBkZWxhcyBhbyBwcm9qZXRvLiBQYXJhIGlzc28sIGVkaXRlXG4gKiBvICphc3NldHMqIG5vIGFycXVpdm8gKiphbmd1bGFyLmpzb24qKiBkYSBhcGxpY2HDp8OjbyBuYSBzZWd1aW50ZSBvcmRlbTpcbiAqIGBgYFxuICogICBcImFzc2V0c1wiOiBbXG4gKiAgICAgXCJzcmMvYXNzZXRzXCIsXG4gKiAgICAgXCJzcmMvZmF2aWNvbi5pY29cIixcbiAqICAgICB7XG4gKiAgICAgICBcImdsb2JcIjogXCIqKlxcLypcIixcbiAqICAgICAgIFwiaW5wdXRcIjogXCJub2RlX21vZHVsZXMvQHBvLXVpL3N0eWxlL2ltYWdlc1wiLFxuICogICAgICAgXCJvdXRwdXRcIjogXCJhc3NldHMvaW1hZ2VzXCJcbiAqICAgICB9XG4gKiAgIF1cbiAqIGBgYFxuICovXG5ARGlyZWN0aXZlKClcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBQb1BhZ2VDaGFuZ2VQYXNzd29yZEJhc2VDb21wb25lbnQge1xuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBDYW1pbmhvIHBhcmEgYSBsb2dvbWFyY2EgbG9jYWxpemFkYSBuYSBwYXJ0ZSBzdXBlcmlvci5cbiAgICpcbiAgICogPiBDYXNvIHNlamEgaW5kZWZpbmlkYSBvIGVzcGHDp28gc2UgbWFudMOpbSBwcmVzZXJ2YWRvIHBvcsOpbSB2YXppby5cbiAgICovXG4gIEBJbnB1dCgncC1sb2dvJykgbG9nbz86IHN0cmluZztcblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBDYW1pbmhvIHBhcmEgYSBsb2dvbWFyY2EgbG9jYWxpemFkYSBubyByb2RhcMOpLlxuICAgKi9cbiAgQElucHV0KCdwLXNlY29uZGFyeS1sb2dvJykgc2Vjb25kYXJ5TG9nbz86IHN0cmluZztcblxuICAvKipcbiAgICogVG9rZW4gcGFyYSBzb2xpY2l0YcOnw6NvIGRlIHRyb2NhL3JlY3VwZXJhw6fDo28gZGUgc2VuaGEuXG4gICAqXG4gICAqID4gRXN0YSBwcm9wcmllZGFkZSBzZXLDoSBpZ25vcmFkYSBjYXNvIGV4aXN0YSB1bSB0b2tlbiBjb21vIHBhcsOibWV0cm8gbmEgVVJMIGluaWNpYWwgZG8gdGVtcGxhdGUuXG4gICAqL1xuICBASW5wdXQoJ3AtdG9rZW4nKSB0b2tlbj86IHN0cmluZztcblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBVUkwgcGFyYSBhIGHDp8OjbyBkZSByZXRvcm5vIGRhIHDDoWdpbmEuXG4gICAqXG4gICAqID4gTyBib3TDo28gYFZvbHRhcmAgYXBhcmVjZSBhcGVuYXMgcGFyYSB0ZWxhcyBkZSBhbHRlcmHDp8OjbyBkZSBzZW5oYSwgb3Ugc2VqYSwgc8OzIGFwYXJlY2Ugc2UgYSBwcm9wcmllZGFkZSBgcC1oaWRlLWN1cnJlbnQtcGFzc3dvcmRgIGZvclxuICAgKiBmYWxzYS5cbiAgICpcbiAgICogQGRlZmF1bHQgYC9gXG4gICAqL1xuICBASW5wdXQoJ3AtdXJsLWJhY2snKSB1cmxCYWNrOiBzdHJpbmcgPSAnLyc7XG5cbiAgLyoqXG4gICAqIEVuZHBvaW50IHVzYWRvIHBlbG8gdGVtcGxhdGUgcGFyYSByZWFsaXphciB1bSBQT1NULiBRdWFuZG8gcHJlZW5jaGlkbywgbyBtw6l0b2RvIGBwLXN1Ym1pdGAgc2Vyw6EgaWdub3JhZG8gZSBvIGNvbXBvbmVudGUgYWRxdWlyaXLDoVxuICAgKiBhdXRvbWF0aXphw6fDo28gcGFyYSBvIHByb2Nlc3NvIGRlIGNhZGFzdHJvL3Ryb2NhIGRlIHNlbmhhLlxuICAgKlxuICAgKiAjIyMgUHJvY2Vzc29cbiAgICogQW8gZGlnaXRhciB1bSB2YWxvciB2w6FsaWRvIG5vcyBjYW1wb3MgZGUgc2VuaGEgZSBwcmVzc2lvbmFyICoqc2FsdmFyKiosXG4gICAqIG8gY29tcG9uZW50ZSBmYXLDoSB1bWEgcmVxdWlzacOnw6NvIGBQT1NUYCBuYSB1cmwgZXNwZWNpZmljYWRhIG5lc3RhIHByb3ByaWVkYWRlIHBhc3NhbmRvIG8gb2JqZXRvIGNvbnRlbmRvIG9zIHZhbG9yZXMgZGVmaW5pZG9zIHBlbG9cbiAgICogdXN1w6FyaW8uXG4gICAqXG4gICAqIGBgYFxuICAgKiBib2R5IHtcbiAgICogIHRva2VuPzogdG9rZW4sXG4gICAqICBvbGRQYXNzd29yZD86IG9sZFBhc3N3b3JkLFxuICAgKiAgbmV3UGFzc3dvcmQ6IG5ld1Bhc3N3b3JkXG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIE8gY8OzZGlnbyBkZSByZXNwb3N0YSBIVFRQIGRlIHN0YXR1cyBlc3BlcmFkbyDDqSBgMjA0YC5cbiAgICpcbiAgICogRW0gY2FzbyBkZSAqKnN1Y2Vzc28qKiwgc2Vyw6EgZXhpYmlkYSBhIG1vZGFsIGRlIGNvbmZpcm1hw6fDo28gZGUgc2VuaGEgYWx0ZXJhZGEuXG4gICAqXG4gICAqID4gTyB0b2tlbiBzZXLDoSBpbmZvcm1hZG8gcGVsYSBwcm9wcmllZGFkZSBgcC10b2tlbmBkbyBjb21wb25lbnRlIG91IHBvciB1bSAqcXVlcnkgcGFyYW1ldGVyKiBuYSBVUkwgZG8gdGVtcGxhdGUuXG4gICAqXG4gICAqICpQcm9jZXNzbyBmaW5hbGl6YWRvLipcbiAgICpcbiAgICogX19fX19fX19fX19fX19fXG4gICAqXG4gICAqICMjIyMgUHJhdGljaWRhZGVcbiAgICogQXMgaW5mb3JtYcOnw7VlcyBkbyBzZXJ2acOnbyBkZSBhdXRlbnRpY2HDp8OjbyB0YW1iw6ltIHBvZGVtIHNlciB0cmFuc21pdGlkYXMgZGlyZXRhbWVudGUgcGVsYXMgY29uZmlndXJhw6fDo29zIGRlIHJvdGEgZSwgZGVzdGEgbWFuZWlyYSxcbiAgICogZGlzcGVuc2Etc2UgcXVhbHF1ZXIgbWVuw6fDo28gZS9vdSBpbXBvcnRhw6fDo28gZG8gY29tcG9uZW50ZSBgcG8tcGFnZS1jaGFuZ2UtcGFzc3dvcmRgIG5vIHJlc3RhbnRlIGRhIGFwbGljYcOnw6NvLiBPIGV4ZW1wbG8gYWJhaXhvXG4gICAqIGV4ZW1wbGlmaWNhIGEgZm9ybWEgZGluw6JtaWNhIGNvbSBhIHF1YWwgbyB0ZW1wbGF0ZSBkZSB0ZWxhIGRlIHRyb2NhIGRlIHNlbmhhIHBvZGUgc2VyIGdlcmFkbyBhbyBuYXZlZ2FyIHBhcmEgcm90YSBgL2NoYW5nZS1wYXNzd29yZGAsIGVcbiAgICogdGFtYsOpbSBjb21vIGVsZSBzZSBjb211bmljYSBjb20gbyBzZXJ2acOnbyBwYXJhIGVmZXR1YcOnw6NvIGRvIHByb2Nlc3NvIGRlIHRyb2NhIGRlIHNlbmhhIGRvIHVzdcOhcmlvIGUgc29saWNpdGHDp8OjbyBkZSBub3ZhIHNlbmhhLlxuICAgKiBCYXN0YSBkZWZpbmlyIG5hcyBjb25maWd1cmHDp8O1ZXMgZGUgcm90YTpcbiAgICpcbiAgICpcbiAgICogYGBgXG4gICAqICAgaW1wb3J0IHsgUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlLCBQb1BhZ2VDaGFuZ2VQYXNzd29yZENvbXBvbmVudCB9IGZyb20gJ0Bwby11aS9uZy10ZW1wbGF0ZXMnO1xuICAgKlxuICAgKiAgIC4uLlxuICAgKiAgIGNvbnN0IHJvdXRlczogUm91dGVzID0gW1xuICAgKiAgICAge1xuICAgKiAgICAgICBwYXRoOiAnY2hhbmdlLXBhc3N3b3JkJywgY29tcG9uZW50OiBQb1BhZ2VDaGFuZ2VQYXNzd29yZENvbXBvbmVudCwgZGF0YToge1xuICAgKiAgICAgICAgIHNlcnZpY2VBcGk6ICdodHRwczovL3BvLXVpLmlvL3NhbXBsZS9hcGkvbmV3LXBhc3N3b3JkJyxcbiAgICogICAgICAgICByZWNvdmVyeToge1xuICAgKiAgICAgICAgICAgdXJsOiAnaHR0cHM6Ly9wby11aS5pby9zYW1wbGUvYXBpL3VzZXJzJyxcbiAgICogICAgICAgICAgIHR5cGU6IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZS5BbGwsXG4gICAqICAgICAgICAgICBjb250YWN0TWFpbDogJ2Rldi5wb0Bwby11aS5jb20nLFxuICAgKiAgICAgICAgICAgcGhvbmVNYXNrOiAnOS05OTktOTk5LTk5OTknXG4gICAqICAgICAgICAgfVxuICAgKiAgICAgICB9XG4gICAqICAgICB9XG4gICAqICAgICAuLi5cbiAgICogICBdO1xuICAgKlxuICAgKiAgIEBOZ01vZHVsZSh7XG4gICAqICAgICBpbXBvcnRzOiBbUm91dGVyTW9kdWxlLmZvclJvb3Qocm91dGVzKV0sXG4gICAqICAgICBleHBvcnRzOiBbUm91dGVyTW9kdWxlXVxuICAgKiAgIH0pXG4gICAqICAgZXhwb3J0IGNsYXNzIEFwcFJvdXRpbmdNb2R1bGUgeyB9XG4gICAqIGBgYFxuICAgKlxuICAgKlxuICAgKiBPIG1ldGFkYWRvIGBzZXJ2aWNlQXBpYCBkZXZlIHNlciBhICoqdXJsKiogcGFyYSByZXF1aXNpw6fDo28gZG9zIHJlY3Vyc29zIGRlIHRyb2NhIGRlIHNlbmhhLiBFIGByZWNvdmVyeWAgw6kgYSBpbnRlcmZhY2VcbiAgICogYFBvUGFnZUNoYW5nZVBhc3N3b3JkUmVjb3ZlcnlgIHJlc3BvbnPDoXZlbCBwZWxhcyBlc3BlY2lmaWNhw6fDtWVzIGNvbnRpZGFzIG5hIG1vZGFsIGRlIHJlY3VwZXJhw6fDo28gZGUgc2VuaGEuXG4gICAqXG4gICAqID4gw4kgZXNzZW5jaWFsIHF1ZSBzaWdhIGEgbm9tZW5jbGF0dXJhIGRvcyBhdHJpYnV0b3MgZXhlbXBsaWZpY2Fkb3MgYWNpbWEgcGFyYSBzdWEgZWZldGl2YSBmdW5jaW9uYWxpZGFkZS5cbiAgICpcbiAgICovXG4gIEBJbnB1dCgncC11cmwtbmV3LXBhc3N3b3JkJykgdXJsTmV3UGFzc3dvcmQ/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogRnVuw6fDo28gZXhlY3V0YWRhIGFvIHN1Ym1ldGVyIG8gZm9ybSBwZWxvIGJvdMOjbyBzYWx2YXIuXG4gICAqXG4gICAqIENhc28gZGVmaW5pZGEgZXNzYSBmdW7Dp8OjbywgYSBtb2RhbCBkZSBjb25maXJtYcOnw6NvIG7Do28gYXBhcmVjZSwgbWFzIHBvZGUgc2VyIGNoYW1hZGEgcGVsb1xuICAgKiBtw6l0b2RvIGBvcGVuQ29uZmlybWF0aW9uYC4gRXhlbXBsbzpcbiAgICpcbiAgICogYGBgXG4gICAqIEBWaWV3Q2hpbGQoUG9QYWdlQ2hhbmdlUGFzc3dvcmRDb21wb25lbnQpIGNoYW5nZVBhc3N3b3JkOiBQb1BhZ2VDaGFuZ2VQYXNzd29yZENvbXBvbmVudDtcbiAgICpcbiAgICogb25TdWJtaXQoKSB7XG4gICAqICB0aGlzLmNoYW5nZVBhc3N3b3JkLm9wZW5Db25maXJtYXRpb24oKTtcbiAgICogfVxuICAgKlxuICAgKiBgYGBcbiAgICogPiBFc3RhIHByb3ByaWVkYWRlIHNlcsOhIGlnbm9yYWRhIHNlIGZvciBkZWZpbmlkbyB2YWxvciBwYXJhIGEgcHJvcHJpZWRhZGUgYHAtdXJsLW5ldy1wYXNzd29yZGAuXG4gICAqL1xuICBAT3V0cHV0KCdwLXN1Ym1pdCcpIHN1Ym1pdDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgY29uZmlybVBhc3N3b3JkOiBzdHJpbmc7XG4gIGN1cnJlbnRQYXNzd29yZDogc3RyaW5nO1xuICBtb2RhbEFjdGlvbjogUG9Nb2RhbEFjdGlvbjtcbiAgbmV3UGFzc3dvcmQ6IHN0cmluZztcbiAgcmVjb3ZlcnlVcmxUeXBlOiBzdHJpbmc7XG4gIHNob3dSZXF1aXJlbWVudHM6IGJvb2xlYW47XG5cbiAgcHJvdGVjdGVkIHZhbGlkYXRvckNoYW5nZTogYW55O1xuXG4gIHByaXZhdGUgX2hpZGVDdXJyZW50UGFzc3dvcmQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBfcmVjb3Zlcnk6IHN0cmluZyB8IFBvUGFnZUNoYW5nZVBhc3N3b3JkUmVjb3ZlcnkgfCBGdW5jdGlvbjtcbiAgcHJpdmF0ZSBfcmVxdWlyZW1lbnRzOiBBcnJheTxQb1BhZ2VDaGFuZ2VQYXNzd29yZFJlcXVpcmVtZW50PiA9IFtdO1xuICBwcml2YXRlIF91cmxIb21lOiBzdHJpbmcgPSAnLyc7XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogRXNjb25kZSBvIGNhbXBvIGBTZW5oYSBhdHVhbGAgcGFyYSBxdWUgbyB0ZW1wbGF0ZSBzZWphIHBhcmEgY3JpYcOnw6NvIGRlIHNlbmhhLlxuICAgKlxuICAgKiBAZGVmYXVsdCBgZmFsc2VgXG4gICAqL1xuICBASW5wdXQoJ3AtaGlkZS1jdXJyZW50LXBhc3N3b3JkJykgc2V0IGhpZGVDdXJyZW50UGFzc3dvcmQodmFsdWU6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9oaWRlQ3VycmVudFBhc3N3b3JkID0gY29udmVydFRvQm9vbGVhbih2YWx1ZSk7XG4gIH1cblxuICBnZXQgaGlkZUN1cnJlbnRQYXNzd29yZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5faGlkZUN1cnJlbnRQYXNzd29yZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIFVSTCBwYXJhIGEgYcOnw6NvIGRvIGxpbmsgYEVzcXVlY2V1IGEgc2VuaGFgLlxuICAgKlxuICAgKiBBIHByb3ByaWVkYWRlIGFjZWl0YSBvcyBzZWd1aW50ZXMgdGlwb3M6XG4gICAqXG4gICAqIC0gKipTdHJpbmcqKjogaW5mb3JtZSB1bWEgdXJsIGV4dGVybmEgb3UgdW1hIHJvdGEgdsOhbGlkYTtcbiAgICogLSAqKkZ1bmN0aW9uKio6IHBvZGUtc2UgY3VzdG9taXphciBhIGHDp8Ojby4gUGFyYSBlc3RhIHBvc3NpbGlkYWRlIGJhc3RhIGF0cmlidWlyOlxuICAgKiBgYGBcbiAgICogPHBvLXBhZ2UtY2hhbmdlLXBhc3N3b3JkPlxuICAgKiAgICAgIFtyZWNvdmVyeV09XCJ0aGlzLm15RnVuYy5iaW5kKHRoaXMpXCI7XG4gICAqIDwvcG8tcGFnZS1jaGFuZ2UtcGFzc3dvcmQ+XG4gICAqIGBgYFxuICAgKlxuICAgKiAtICoqUG9QYWdlQ2hhbmdlUGFzc3dvcmRSZWNvdmVyeSoqOiBjcmlhLXNlIHbDrW5jdWxvIGF1dG9tw6F0aWNvIGNvbSBvIHRlbXBsYXRlICoqcG8tbW9kYWwtcGFzc3dvcmQtcmVjb3ZlcnkqKi5cbiAgICogICBPIG9iamV0byBkZXZlIGNvbnRlciBhICoqdXJsKiogcGFyYSByZXF1aXNpw6fDo28gZG9zIHJlY3Vyc29zIGUgcG9kZS1zZSBkZWZpbmlyIG8gKip0aXBvKiogZGUgbW9kYWwgcGFyYSByZWN1cGVyYcOnw6NvIGRlIHNlbmhhLFxuICAgKiAgICoqZW1haWwqKiBwYXJhIGNvbnRhdG8gZSAqKm3DoXNjYXJhKiogZG8gY2FtcG8gZGUgdGVsZWZvbmUuXG4gICAqXG4gICAqID4gQ2FzbyBuw6NvIHRlbmhhIHZhbG9yIG8gbGluayBgRXNxdWVjZXUgYSBzZW5oYWAgZGVzYXBhcmVjZS5cbiAgICovXG4gIEBJbnB1dCgncC1yZWNvdmVyeScpIHNldCByZWNvdmVyeSh2YWx1ZTogc3RyaW5nIHwgRnVuY3Rpb24gfCBQb1BhZ2VDaGFuZ2VQYXNzd29yZFJlY292ZXJ5KSB7XG4gICAgdGhpcy5fcmVjb3ZlcnkgPSB2YWx1ZTtcblxuICAgIGlmIChpc1R5cGVvZih2YWx1ZSwgJ3N0cmluZycpKSB7XG4gICAgICB0aGlzLnJlY292ZXJ5VXJsVHlwZSA9IGlzRXh0ZXJuYWxMaW5rKHZhbHVlKSA/ICdleHRlcm5hbExpbmsnIDogJ2ludGVybmFsTGluayc7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHJlY292ZXJ5KCkge1xuICAgIHJldHVybiB0aGlzLl9yZWNvdmVyeTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIExpc3RhIGRlIHJlZ3JhcyBwYXJhIGNyaWHDp8OjbyBlIGFsdGVyYcOnw6NvIGRlIHNlbmhhLlxuICAgKi9cbiAgQElucHV0KCdwLXJlcXVpcmVtZW50cycpIHNldCByZXF1aXJlbWVudHModmFsdWU6IEFycmF5PFBvUGFnZUNoYW5nZVBhc3N3b3JkUmVxdWlyZW1lbnQ+KSB7XG4gICAgdGhpcy5fcmVxdWlyZW1lbnRzID0gdmFsdWUgfHwgW107XG4gICAgdGhpcy5zaG93UmVxdWlyZW1lbnRzID0gdGhpcy5fcmVxdWlyZW1lbnRzLmxlbmd0aCA+IDA7XG4gIH1cbiAgZ2V0IHJlcXVpcmVtZW50cygpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWlyZW1lbnRzO1xuICB9XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogVVJMIHBhcmEgYSBhw6fDo28gZG8gYm90w6NvIGBFbnRyYXIgbm8gc2lzdGVtYWAgZGEgbW9kYWwgZGUgY29uZmlybWHDp8OjbyBxdWUgYXBhcmVjZSBhcMOzcyBzYWx2YXIgYSBzZW5oYSBvdSBzZSBjaGFtYWRhIHBlbG8gbcOpdG9kb1xuICAgKiBgb3BlbkNvbmZpcm1hdGlvbmAuXG4gICAqXG4gICAqIEBkZWZhdWx0IGAvYFxuICAgKi9cbiAgQElucHV0KCdwLXVybC1ob21lJykgc2V0IHVybEhvbWUodmFsdWU6IHN0cmluZykge1xuICAgIHRoaXMuX3VybEhvbWUgPSB2YWx1ZTtcbiAgICB0aGlzLm1vZGFsQWN0aW9uLmFjdGlvbiA9IHRoaXMubmF2aWdhdGVUby5iaW5kKHRoaXMsIHRoaXMudXJsSG9tZSk7XG4gIH1cbiAgZ2V0IHVybEhvbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3VybEhvbWU7XG4gIH1cblxuICBhYnN0cmFjdCBuYXZpZ2F0ZVRvKHVybDogc3RyaW5nKTogdm9pZDtcbn1cbiJdfQ==