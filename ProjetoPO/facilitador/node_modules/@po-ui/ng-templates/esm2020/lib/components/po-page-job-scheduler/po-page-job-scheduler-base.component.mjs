import { Input, Directive } from '@angular/core';
import { PoPageJobSchedulerInternal } from './po-page-job-scheduler-internal';
import { Subscription } from 'rxjs';
import * as i0 from "@angular/core";
import * as i1 from "./po-page-job-scheduler.service";
/**
 * @description
 *
 * O `po-page-job-scheduler` é uma página para criação e atualização de agendamentos da execução de processos (Job Scheduler),
 * como por exemplo: a geração da folha de pagamento dos funcionários.
 *
 * Para utilizar esta página, basta informar o serviço (endpoint) para consumo,
 * sem a necessidade de criar componentes e tratamentos dos dados.
 *
 * Veja mais sobre os padrões utilizados nas requisições no [Guia de implementação de APIs](guides/api).
 */
export class PoPageJobSchedulerBaseComponent {
    constructor(poPageJobSchedulerService) {
        this.poPageJobSchedulerService = poPageJobSchedulerService;
        /** Objeto com as propriedades do breadcrumb. */
        this.breadcrumb = { items: [] };
        /**
         * Parâmetros que serão utilizados para criação e edição dos agendamentos.
         *
         * Ao utilizar esta propriedade, o componente não buscará automaticamente os parâmetros da API e o campo para preenchimento do processo não será exibido.
         *
         */
        this.parameters = [];
        this.model = new PoPageJobSchedulerInternal();
        this._subscription = new Subscription();
    }
    set value(value) {
        this.model = this.poPageJobSchedulerService.convertToJobSchedulerInternal(value);
    }
    ngOnDestroy() {
        this._subscription.unsubscribe();
    }
    loadData(id) {
        if (!id) {
            this.model = this.model || new PoPageJobSchedulerInternal();
            return;
        }
        this._subscription.add(this.poPageJobSchedulerService.getResource(id).subscribe((response) => {
            this.model = response;
        }, () => {
            this.model = new PoPageJobSchedulerInternal();
        }));
    }
    markAsDirtyInvalidControls(controls) {
        for (const key in controls) {
            if (controls.hasOwnProperty(key)) {
                const control = controls[key];
                if (control.invalid) {
                    control.markAsDirty();
                }
            }
        }
    }
}
PoPageJobSchedulerBaseComponent.ɵfac = function PoPageJobSchedulerBaseComponent_Factory(t) { return new (t || PoPageJobSchedulerBaseComponent)(i0.ɵɵdirectiveInject(i1.PoPageJobSchedulerService)); };
PoPageJobSchedulerBaseComponent.ɵdir = /*@__PURE__*/ i0.ɵɵdefineDirective({ type: PoPageJobSchedulerBaseComponent, inputs: { breadcrumb: ["p-breadcrumb", "breadcrumb"], serviceApi: ["p-service-api", "serviceApi"], title: ["p-title", "title"], parameters: ["p-parameters", "parameters"], value: ["p-value", "value"] } });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(PoPageJobSchedulerBaseComponent, [{
        type: Directive
    }], function () { return [{ type: i1.PoPageJobSchedulerService }]; }, { breadcrumb: [{
            type: Input,
            args: ['p-breadcrumb']
        }], serviceApi: [{
            type: Input,
            args: ['p-service-api']
        }], title: [{
            type: Input,
            args: ['p-title']
        }], parameters: [{
            type: Input,
            args: ['p-parameters']
        }], value: [{
            type: Input,
            args: ['p-value']
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tcGFnZS1qb2Itc2NoZWR1bGVyLWJhc2UuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvdGVtcGxhdGVzL3NyYy9saWIvY29tcG9uZW50cy9wby1wYWdlLWpvYi1zY2hlZHVsZXIvcG8tcGFnZS1qb2Itc2NoZWR1bGVyLWJhc2UuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFhLE1BQU0sZUFBZSxDQUFDO0FBSzVELE9BQU8sRUFBRSwwQkFBMEIsRUFBRSxNQUFNLGtDQUFrQyxDQUFDO0FBRTlFLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxNQUFNLENBQUM7OztBQUVwQzs7Ozs7Ozs7OztHQVVHO0FBRUgsTUFBTSxPQUFPLCtCQUErQjtJQThKMUMsWUFBc0IseUJBQW9EO1FBQXBELDhCQUF5QixHQUF6Qix5QkFBeUIsQ0FBMkI7UUE3SjFFLGdEQUFnRDtRQUN6QixlQUFVLEdBQWtCLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxDQUFDO1FBNElqRTs7Ozs7V0FLRztRQUNvQixlQUFVLEdBQThCLEVBQUUsQ0FBQztRQU1sRSxVQUFLLEdBQTJCLElBQUksMEJBQTBCLEVBQUUsQ0FBQztRQUV6RCxrQkFBYSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7SUFFa0MsQ0FBQztJQVI5RSxJQUFzQixLQUFLLENBQUMsS0FBVTtRQUNwQyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyx5QkFBeUIsQ0FBQyw2QkFBNkIsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNuRixDQUFDO0lBUUQsV0FBVztRQUNULElBQUksQ0FBQyxhQUFhLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDbkMsQ0FBQztJQUVTLFFBQVEsQ0FBQyxFQUFtQjtRQUNwQyxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ1AsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksMEJBQTBCLEVBQUUsQ0FBQztZQUM1RCxPQUFPO1NBQ1I7UUFFRCxJQUFJLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FDcEIsSUFBSSxDQUFDLHlCQUF5QixDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxTQUFTLENBQ3RELENBQUMsUUFBZ0MsRUFBRSxFQUFFO1lBQ25DLElBQUksQ0FBQyxLQUFLLEdBQUcsUUFBUSxDQUFDO1FBQ3hCLENBQUMsRUFDRCxHQUFHLEVBQUU7WUFDSCxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksMEJBQTBCLEVBQUUsQ0FBQztRQUNoRCxDQUFDLENBQ0YsQ0FDRixDQUFDO0lBQ0osQ0FBQztJQUVTLDBCQUEwQixDQUFDLFFBQTRDO1FBQy9FLEtBQUssTUFBTSxHQUFHLElBQUksUUFBUSxFQUFFO1lBQzFCLElBQUksUUFBUSxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsRUFBRTtnQkFDaEMsTUFBTSxPQUFPLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUU5QixJQUFJLE9BQU8sQ0FBQyxPQUFPLEVBQUU7b0JBQ25CLE9BQU8sQ0FBQyxXQUFXLEVBQUUsQ0FBQztpQkFDdkI7YUFDRjtTQUNGO0lBQ0gsQ0FBQzs7OEdBaE1VLCtCQUErQjtrRkFBL0IsK0JBQStCO3VGQUEvQiwrQkFBK0I7Y0FEM0MsU0FBUzs0RUFHZSxVQUFVO2tCQUFoQyxLQUFLO21CQUFDLGNBQWM7WUF1SUcsVUFBVTtrQkFBakMsS0FBSzttQkFBQyxlQUFlO1lBR0osS0FBSztrQkFBdEIsS0FBSzttQkFBQyxTQUFTO1lBUU8sVUFBVTtrQkFBaEMsS0FBSzttQkFBQyxjQUFjO1lBRUMsS0FBSztrQkFBMUIsS0FBSzttQkFBQyxTQUFTIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWJzdHJhY3RDb250cm9sIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgSW5wdXQsIERpcmVjdGl2ZSwgT25EZXN0cm95IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IFBvQnJlYWRjcnVtYiwgUG9EeW5hbWljRm9ybUZpZWxkIH0gZnJvbSAnQHBvLXVpL25nLWNvbXBvbmVudHMnO1xuXG5pbXBvcnQgeyBQb0pvYlNjaGVkdWxlckludGVybmFsIH0gZnJvbSAnLi9pbnRlcmZhY2VzL3BvLWpvYi1zY2hlZHVsZXItaW50ZXJuYWwuaW50ZXJmYWNlJztcbmltcG9ydCB7IFBvUGFnZUpvYlNjaGVkdWxlckludGVybmFsIH0gZnJvbSAnLi9wby1wYWdlLWpvYi1zY2hlZHVsZXItaW50ZXJuYWwnO1xuaW1wb3J0IHsgUG9QYWdlSm9iU2NoZWR1bGVyU2VydmljZSB9IGZyb20gJy4vcG8tcGFnZS1qb2Itc2NoZWR1bGVyLnNlcnZpY2UnO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogTyBgcG8tcGFnZS1qb2Itc2NoZWR1bGVyYCDDqSB1bWEgcMOhZ2luYSBwYXJhIGNyaWHDp8OjbyBlIGF0dWFsaXphw6fDo28gZGUgYWdlbmRhbWVudG9zIGRhIGV4ZWN1w6fDo28gZGUgcHJvY2Vzc29zIChKb2IgU2NoZWR1bGVyKSxcbiAqIGNvbW8gcG9yIGV4ZW1wbG86IGEgZ2VyYcOnw6NvIGRhIGZvbGhhIGRlIHBhZ2FtZW50byBkb3MgZnVuY2lvbsOhcmlvcy5cbiAqXG4gKiBQYXJhIHV0aWxpemFyIGVzdGEgcMOhZ2luYSwgYmFzdGEgaW5mb3JtYXIgbyBzZXJ2acOnbyAoZW5kcG9pbnQpIHBhcmEgY29uc3VtbyxcbiAqIHNlbSBhIG5lY2Vzc2lkYWRlIGRlIGNyaWFyIGNvbXBvbmVudGVzIGUgdHJhdGFtZW50b3MgZG9zIGRhZG9zLlxuICpcbiAqIFZlamEgbWFpcyBzb2JyZSBvcyBwYWRyw7VlcyB1dGlsaXphZG9zIG5hcyByZXF1aXNpw6fDtWVzIG5vIFtHdWlhIGRlIGltcGxlbWVudGHDp8OjbyBkZSBBUElzXShndWlkZXMvYXBpKS5cbiAqL1xuQERpcmVjdGl2ZSgpXG5leHBvcnQgY2xhc3MgUG9QYWdlSm9iU2NoZWR1bGVyQmFzZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uRGVzdHJveSB7XG4gIC8qKiBPYmpldG8gY29tIGFzIHByb3ByaWVkYWRlcyBkbyBicmVhZGNydW1iLiAqL1xuICBASW5wdXQoJ3AtYnJlYWRjcnVtYicpIGJyZWFkY3J1bWI/OiBQb0JyZWFkY3J1bWIgPSB7IGl0ZW1zOiBbXSB9O1xuXG4gIC8qKlxuICAgKiBFbmRwb2ludCB1c2FkbyBwZWxvIGNvbXBvbmVudGUgcGFyYSBidXNjYSBkb3MgcHJvY2Vzc29zIGUgcGFyw6JtZXRyb3MgcXVlIHNlcsOjbyB1dGlsaXphZG9zIHBhcmEgY3JpYcOnw6NvIGUgZWRpw6fDo28gZG9zIGFnZW5kYW1lbnRvcy5cbiAgICpcbiAgICogIyMjIyBQcm9jZXNzb3NcbiAgICpcbiAgICogT3MgcHJvY2Vzc29zIHPDo28gYXMgdGFyZWZhcyBxdWUgZXN0YXLDo28gZGlzcG9uw612ZWlzIHBhcmEgbyB1c3XDoXJpbyBwb2RlciBmYXplciBvcyBhZ2VuZGFtZW50b3MuXG4gICAqIEFvIGluaWNpYWxpemFyIG8gY29tcG9uZW50ZSwgc2Vyw6EgZmVpdG8gdW1hIHJlcXVpc2nDp8OjbyBgR0VUYCBwYXJhIG8gZW5kcG9pbnQgYHtzZXJ2aWNlLWFwaX0vcHJvY2Vzc2VzYCwgcGFyYSBidXNjYXJcbiAgICogZXNzYSBsaXN0YSBkZSBwcm9jZXNzb3MuXG4gICAqXG4gICAqIEVzdGUgZW5kcG9pbnQgYHtzZXJ2aWNlLWFwaX0vcHJvY2Vzc2VzYCBkZXZlIHJldG9ybmFyIHVtYSBsaXN0YSBkZSBvYmpldG9zIHF1ZSBzZWd1ZW0gYSBkZWZpbmnDp8OjbyBkZSBkYWRvcyBhYmFpeG86XG4gICAqXG4gICAqIGBgYFxuICAgKiBHRVQge3NlcnZpY2UtYXBpfS9wcm9jZXNzZXNcbiAgICogYGBgXG4gICAqXG4gICAqIGBgYFxuICAgKiB7XG4gICAqICAgaXRlbXM6IFtcbiAgICogICAgIHsgXCJwcm9jZXNzSURcIjogXCJhYzRmXCIsIFwiZGVzY3JpcHRpb25cIjogXCJHZXJhciBmb2xoYSBkZSBwYWdhbWVudG9cIiB9LFxuICAgKiAgICAgeyBcInByb2Nlc3NJRFwiOiBcImRmNmxcIiwgXCJkZXNjcmlwdGlvblwiOiBcIlJlbGF0w7NyaW8gZGUgaW1wb3N0byBhIHJlY29saGVyXCIgfSxcbiAgICogICAgIHsgXCJwcm9jZXNzSURcIjogXCJkazNwXCIsIFwiZGVzY3JpcHRpb25cIjogXCJUw610dWxvcyBlbSBhYmVydG9cIiB9LFxuICAgKiAgIF1cbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogRGVzdGEgZm9ybWEgc2Vyw6EgcmVuZGVyaXphZG8gdW0gY29tcG9uZW50ZSBwYXJhIHNlbGVjaW9uYXIgbyBwcm9jZXNzbyBlL291IGZpbHRyw6EtbG9zLlxuICAgKlxuICAgKiBQYXJhIHJlYWxpemFyIG8gZmlsdHJvIGRlIGJ1c2NhIGRvIHByb2Nlc3NvLCBzZXLDoSBmZWl0YSB1bWEgcmVxdWlzacOnw6NvIGVudmlhbmRvIG8gY29udGXDumRvIGRpZ2l0YWRvIG5hIGJ1c2NhIGF0cmF2w6lzIGRvXG4gICAqIHBhcsOibWV0cm8gYHNlYXJjaGAuIERhIHNlZ3VpbnRlIGZvcm1hOlxuICAgKlxuICAgKiBgYGBcbiAgICogR0VUIHtzZXJ2aWNlLWFwaX0vcHJvY2Vzc2VzP3NlYXJjaD1yZWxhdG9yaW9cbiAgICogYGBgXG4gICAqXG4gICAqID4gVmVqYSBtYWlzIHNvYnJlIHBhZ2luYcOnw6NvIGUgZmlsdHJvcyBubyBbR3VpYSBkZSBpbXBsZW1lbnRhw6fDo28gZGUgQVBJc10oZ3VpZGVzL2FwaSkuXG4gICAqIENhc28gc2VqYSBpbmZvcm1hZGEgYSBwcm9wcmllZGFkZSBgcC1wYXJhbWV0ZXJzYCBuw6NvIHNlcsOjbyByZWFsaXphZGFzIGFzIHJlcXVpc2nDp8O1ZXMgZGUgcHJvY2Vzc29zIGUgbmVtIGRlIHBhcmFtZXRyb3MgYXV0b21hdGljYW1lbnRlLlxuICAgKlxuICAgKiBUYW1iw6ltIMOpIHBvc3PDrXZlbCBmYXplciB1bSBhZ2VuZGFtZW50byBkZSB1bSBwcm9jZXNzbyBlc3BlY8OtZmljbywgc2VtIHF1ZSBzZWphIG5lY2Vzc8OhcmlvIHVtIGVuZHBvaW50IHBhcmEgYnVzY2EgZGVzc2VzXG4gICAqIHByb2Nlc3Nvcy4gRW50w6NvLCBjYXNvIG8gZW5kcG9pbnQgYHtzZXJ2aWNlLWFwaX0vcHJvY2Vzc2VzYCBuw6NvIHNlamEgdsOhbGlkbywgc2Vyw6EgYXByZXNlbnRhZG8gdW0gY2FtcG8gZGUgZW50cmFkYSBkZVxuICAgKiB0ZXh0byBwYXJhIG8gdXN1w6FyaW8gaW5mb3JtYXIgZGlyZXRhbWVudGVcbiAgICogbyAqKmlkZW50aWZpY2Fkb3IgZG8gcHJvY2Vzc28gLSBgcHJvY2Vzc0lEYCoqIGUgYW8gc2FsdmFyIHNlcsOhIGVudmlhZG8gdW0gYFBPU1RgIHBhcmEgbyBlbmRwb2ludCBkaWZpbmlkbyBgc2VydmljZUFwaWAgY29uZm9ybWUgYWJhaXhvOlxuICAgKlxuICAgKiBgYGBcbiAgICogUE9TVCB7c2VydmljZS1hcGl9XG4gICAqIGBgYFxuICAgKlxuICAgKiAqUmVxdWVzdCBwYXlsb2FkKiAtIGVzdHJ1dHVyYSBkZSBkYWRvcyBlbnZpYWRhIG5vIGNvcnBvIGRhIHJlcXVpc2nDp8OjbyBjb25mb3JtZSBpbnRlcmZhY2UgYFBvSm9iU2NoZWR1bGVyYDpcbiAgICpcbiAgICogYGBgXG4gICAqIHtcbiAgICogICBcImRhaWx5XCI6IHsgXCJob3VyXCI6IDEwLCBcIm1pbnV0ZVwiOiAxMiB9LFxuICAgKiAgIFwiZmlyc3RFeGVjdXRpb25cIjogXCIyMDE4LTEyLTA3VDAwOjAwOjAxLTAwOjAwXCIsXG4gICAqICAgXCJyZWN1cnJlbnRcIjogdHJ1ZSxcbiAgICogICBcInByb2Nlc3NJRFwiOiBcImFjMDQwNVwiXG4gICAqICAgLi4uXG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIENhc28gc2VqYSBuZWNlc3PDoXJpbyBpbmZvcm1hciBwYXLDom1ldHJvcyBlIGFkaWNpb25hciBjb25maWd1cmHDp8O1ZXMgbm8gcHJvY2Vzc28gc2VsZWNpb25hZG8sIHNlcsOhIHJlYWxpemFkbyB1bSBgR0VUYFxuICAgKiBjb21vIGV4ZW1wbGlmaWNhZG8gYWJhaXhvLiBPcyBwYXLDom1ldHJvcyBkZXZlbSByZXRvcm5hciB1bWEgbGlzdGEgZGUgb2JqZXRvcyBxdWUgc2VndWVtIGEgaW50ZXJmYWNlXG4gICAqIFtQb0R5bmFtaWNGb3JtRmllbGRdKC9kb2N1bWVudGF0aW9uL3BvLWR5bmFtaWMtZm9ybSkuIFBvcsOpbSwgY2FzbyB1dGlsaXphciBhIHByb3ByaWVkYWRlIGBwLXBhcmFtZXRlcnNgIG8gY29tcG9uZW50ZSBuw6NvXG4gICAqIHJlYWxpemFyw6EgYSBidXNjYSBhdXRvbcOhdGljYSBlIG8gY2FtcG8gZGUgcHJvY2Vzc29zIG7Do28gc2Vyw6EgZXhpYmlkby5cbiAgICpcbiAgICogYGBgXG4gICAqIEdFVCB7c2VydmljZS1hcGl9L3Byb2Nlc3Nlcy86aWQvcGFyYW1ldGVyc1xuICAgKiAuLi5cbiAgICoge1xuICAgKiAgIGl0ZW1zOiBbXG4gICAqICAgICB7IFwicHJvcGVydHlcIjogXCJ2ZW5jaW1lbnRvXCIsIHR5cGU6IFwiZGF0ZVwiIH0sXG4gICAqICAgICB7IFwicHJvcGVydHlcIjogXCJpbXBvc3RvLXJldGlkb1wiLCBcImxhYmVsXCI6IFwiSW1wb3N0byBSZXRpZG9cIiwgdHlwZTogXCJib29sZWFuXCIgfVxuICAgKiAgIF1cbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogIyMjIyBTYWx2YXIgZSBBdHVhbGl6YXJcbiAgICpcbiAgICogUGFyYSBzYWx2YXIgbyBhZ2VuZGFtZW50bywgc2Vyw6EgZmVpdGEgdW1hIHJlcXVpc2nDp8OjbyBkZSBjcmlhw6fDo28sIHBhc3NhbmRvIG9zIHZhbG9yZXMgcHJlZW5jaGlkb3MgcGVsbyB1c3XDoXJpbyB2aWEgKnBheWxvYWQqLlxuICAgKiBBYmFpeG8gdW1hIHJlcXVpc2nDp8OjbyBgUE9TVGAgZGlzcGFyYWRhLCBvbmRlIGFzIHByb3ByaWVkYWRlcyBkbyAqSm9iIFNjaGVkdWxlciogZm9yYW0gcHJlZW5jaGlkYXM6XG4gICAqXG4gICAqIGBgYFxuICAgKiAgUE9TVCB7c2VydmljZS1hcGl9XG4gICAqIGBgYFxuICAgKlxuICAgKiAqUmVxdWVzdCBwYXlsb2FkKiAtIGVzdHJ1dHVyYSBkZSBkYWRvcyBlbnZpYWRhIG5vIGNvcnBvIGRhIHJlcXVpc2nDp8OjbyBjb25mb3JtZSBpbnRlcmZhY2UgYFBvSm9iU2NoZWR1bGVyYDpcbiAgICpcbiAgICogYGBgXG4gICAqIHtcbiAgICogICBcImZpcnN0RXhlY3V0aW9uXCI6IFwiMjAxOC0xMi0wN1QwMDowMDowMS0wMDowMFwiLFxuICAgKiAgIFwicmVjdXJyZW50XCI6IHRydWUsXG4gICAqICAgXCJtb250aGx5XCI6IHsgXCJkYXlcIjogMSwgXCJob3VyXCI6IDEwLCBcIm1pbnV0ZVwiOiAwIH0sXG4gICAqICAgXCJwcm9jZXNzSURcIjogXCJhYzA0MDVcIixcbiAgICogICBcInJhbmdlRXhlY3V0aW9uczogeyBcImZyZXF1ZW5jeVwiOiB7IFwidHlwZVwiOiBcImhvdXJcIiwgXCJ2YWx1ZVwiOiAyIH0sIFwicmFuZ2VMaW1pdFwiOiB7IFwiaG91clwiOiAxOCwgXCJtaW51dGVcIjogMCwgXCJkYXlcIjogMjAgfSB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIENhc28gcXVlaXJhIHF1ZSBvIGNvbXBvbmVudGUgY2FycmVndWUgdW0gYWdlbmRhbWVudG8gasOhIGV4aXN0ZW50ZSwgZGV2ZSBzZXIgaW5jbHXDrWRvIHVtIHBhcsOibWV0cm8gbmEgcm90YSBjaGFtYWRvIGBpZGAuXG4gICAqXG4gICAqIEV4ZW1wbG8gZGUgY29uZmlndXJhw6fDo28gZGUgcm90YTpcbiAgICpcbiAgICogYGBgXG4gICAqICBSb3V0ZXJNb2R1bGUuZm9yUm9vdChbXG4gICAqICAgIC4uLlxuICAgKiAgICB7IHBhdGg6ICdlZGl0LzppZCcsIGNvbXBvbmVudDogRXhhbXBsZUpvYlNjaGVkdWxlckNvbXBvbmVudCB9LFxuICAgKiAgICAuLi5cbiAgICogIF0sXG4gICAqIGBgYFxuICAgKlxuICAgKiBCYXNlYWRvIG5pc3NvLCBuYSBpbmljaWFsaXphw6fDo28gZG8gdGVtcGxhdGUgc2Vyw6EgZGlzcGFyYWRvIHVtYSByZXF1aXNpw6fDo28gcGFyYSBidXNjYXIgbyByZWN1cnNvIHF1ZSBzZXLDoSBlZGl0YWRvLlxuICAgKlxuICAgKiBgYGBcbiAgICogR0VUIHtzZXJ2aWNlLWFwaX0ve2lkfVxuICAgKiBgYGBcbiAgICpcbiAgICogQW8gYXR1YWxpemFyIG8gYWdlbmRhbWVudG8sIHNlcsOhIGRpc3BhcmFkbyB1bSBgUFVUYCBjb20gb3MgZGFkb3MgcHJlZW5jaGlkb3MuXG4gICAqIFZlamEgYWJhaXhvIHVtYSByZXF1aXNpw6fDo28gYFBVVGAgZGlzcGFyYWRhLCBvbmRlIGEgcHJvcHJpZWRhZGUgKnJlY3VycmVudCogZSAqZGFpbHkqIGZvcmFtIGF0dWFsaXphZGFzOlxuICAgKlxuICAgKiBgYGBcbiAgICogIFBVVCB7c2VydmljZS1hcGl9L3tpZH1cbiAgICogYGBgXG4gICAqXG4gICAqICpSZXF1ZXN0IHBheWxvYWQqIC0gZXN0cnV0dXJhIGRlIGRhZG9zIGVudmlhZGEgbm8gY29ycG8gZGEgcmVxdWlzacOnw6NvIGNvbmZvcm1lIGludGVyZmFjZSBgUG9Kb2JTY2hlZHVsZXJgOlxuICAgKlxuICAgKiBgYGBcbiAgICoge1xuICAgKiAgIFwiZmlyc3RFeGVjdXRpb25cIjogXCIyMDE4LTEyLTA3VDAwOjAwOjAxLTAwOjAwXCIsXG4gICAqICAgXCJyZWN1cnJlbnRcIjogdHJ1ZSxcbiAgICogICBcInByb2Nlc3NJRFwiOiBcImFjMDQwNVwiLFxuICAgKiAgIFwibW9udGhseVwiOiB7IFwiZGF5XCI6IDEsIFwiaG91clwiOiAxMCwgXCJtaW51dGVcIjogMCB9LFxuICAgKiAgIFwicHJvY2Vzc0lEXCI6IFwiYWMwNDA1XCIsXG4gICAqICAgXCJyYW5nZUV4ZWN1dGlvbnM6IHsgXCJmcmVxdWVuY3lcIjogeyBcInR5cGVcIjogXCJob3VyXCIsIFwidmFsdWVcIjogMiB9LCBcInJhbmdlTGltaXRcIjogeyBcImhvdXJcIjogMTgsIFwibWludXRlXCI6IDAsIFwiZGF5XCI6IDIwIH0gfVxuICAgKiB9XG4gICAqIGBgYFxuICAgKi9cbiAgQElucHV0KCdwLXNlcnZpY2UtYXBpJykgc2VydmljZUFwaTogc3RyaW5nO1xuXG4gIC8qKiBUw610dWxvIGRhIHDDoWdpbmEuICovXG4gIEBJbnB1dCgncC10aXRsZScpIHRpdGxlOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFBhcsOibWV0cm9zIHF1ZSBzZXLDo28gdXRpbGl6YWRvcyBwYXJhIGNyaWHDp8OjbyBlIGVkacOnw6NvIGRvcyBhZ2VuZGFtZW50b3MuXG4gICAqXG4gICAqIEFvIHV0aWxpemFyIGVzdGEgcHJvcHJpZWRhZGUsIG8gY29tcG9uZW50ZSBuw6NvIGJ1c2NhcsOhIGF1dG9tYXRpY2FtZW50ZSBvcyBwYXLDom1ldHJvcyBkYSBBUEkgZSBvIGNhbXBvIHBhcmEgcHJlZW5jaGltZW50byBkbyBwcm9jZXNzbyBuw6NvIHNlcsOhIGV4aWJpZG8uXG4gICAqXG4gICAqL1xuICBASW5wdXQoJ3AtcGFyYW1ldGVycycpIHBhcmFtZXRlcnM6IEFycmF5PFBvRHluYW1pY0Zvcm1GaWVsZD4gPSBbXTtcblxuICBASW5wdXQoJ3AtdmFsdWUnKSBzZXQgdmFsdWUodmFsdWU6IGFueSkge1xuICAgIHRoaXMubW9kZWwgPSB0aGlzLnBvUGFnZUpvYlNjaGVkdWxlclNlcnZpY2UuY29udmVydFRvSm9iU2NoZWR1bGVySW50ZXJuYWwodmFsdWUpO1xuICB9XG5cbiAgbW9kZWw6IFBvSm9iU2NoZWR1bGVySW50ZXJuYWwgPSBuZXcgUG9QYWdlSm9iU2NoZWR1bGVySW50ZXJuYWwoKTtcblxuICBwcml2YXRlIF9zdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG5cbiAgY29uc3RydWN0b3IocHJvdGVjdGVkIHBvUGFnZUpvYlNjaGVkdWxlclNlcnZpY2U6IFBvUGFnZUpvYlNjaGVkdWxlclNlcnZpY2UpIHt9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5fc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgbG9hZERhdGEoaWQ6IHN0cmluZyB8IG51bWJlcikge1xuICAgIGlmICghaWQpIHtcbiAgICAgIHRoaXMubW9kZWwgPSB0aGlzLm1vZGVsIHx8IG5ldyBQb1BhZ2VKb2JTY2hlZHVsZXJJbnRlcm5hbCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3N1YnNjcmlwdGlvbi5hZGQoXG4gICAgICB0aGlzLnBvUGFnZUpvYlNjaGVkdWxlclNlcnZpY2UuZ2V0UmVzb3VyY2UoaWQpLnN1YnNjcmliZShcbiAgICAgICAgKHJlc3BvbnNlOiBQb0pvYlNjaGVkdWxlckludGVybmFsKSA9PiB7XG4gICAgICAgICAgdGhpcy5tb2RlbCA9IHJlc3BvbnNlO1xuICAgICAgICB9LFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5tb2RlbCA9IG5ldyBQb1BhZ2VKb2JTY2hlZHVsZXJJbnRlcm5hbCgpO1xuICAgICAgICB9XG4gICAgICApXG4gICAgKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBtYXJrQXNEaXJ0eUludmFsaWRDb250cm9scyhjb250cm9sczogeyBba2V5OiBzdHJpbmddOiBBYnN0cmFjdENvbnRyb2wgfSkge1xuICAgIGZvciAoY29uc3Qga2V5IGluIGNvbnRyb2xzKSB7XG4gICAgICBpZiAoY29udHJvbHMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICBjb25zdCBjb250cm9sID0gY29udHJvbHNba2V5XTtcblxuICAgICAgICBpZiAoY29udHJvbC5pbnZhbGlkKSB7XG4gICAgICAgICAgY29udHJvbC5tYXJrQXNEaXJ0eSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iXX0=