import { Component, EventEmitter, Input, Output } from '@angular/core';
import { poLanguageDefault } from '@po-ui/ng-components';
import { convertToBoolean, isTypeof } from './../../utils/util';
import * as i0 from "@angular/core";
import * as i1 from "@po-ui/ng-components";
import * as i2 from "@angular/common";
import * as i3 from "@angular/forms";
function PoPageBackgroundComponent_img_2_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelement(0, "img", 12);
} if (rf & 2) {
    const ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵclassProp("po-page-background-hide-logo", ctx_r0.hideLogo);
    i0.ɵɵproperty("src", ctx_r0.logo, i0.ɵɵsanitizeUrl);
} }
function PoPageBackgroundComponent_div_9_Template(rf, ctx) { if (rf & 1) {
    const _r5 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 13)(1, "po-select", 14);
    i0.ɵɵlistener("ngModelChange", function PoPageBackgroundComponent_div_9_Template_po_select_ngModelChange_1_listener($event) { i0.ɵɵrestoreView(_r5); const ctx_r4 = i0.ɵɵnextContext(); return i0.ɵɵresetView(ctx_r4.selectedLanguageOption = $event); })("p-change", function PoPageBackgroundComponent_div_9_Template_po_select_p_change_1_listener() { i0.ɵɵrestoreView(_r5); const ctx_r6 = i0.ɵɵnextContext(); return i0.ɵɵresetView(ctx_r6.onChangeLanguage()); });
    i0.ɵɵelementEnd()();
} if (rf & 2) {
    const ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(1);
    i0.ɵɵproperty("ngModel", ctx_r1.selectedLanguageOption)("p-options", ctx_r1.selectLanguageOptions);
} }
function PoPageBackgroundComponent_img_11_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelement(0, "img", 15);
} if (rf & 2) {
    const ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵproperty("src", ctx_r2.secondaryLogo, i0.ɵɵsanitizeUrl);
} }
function PoPageBackgroundComponent_div_12_Template(rf, ctx) { if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 16)(1, "div", 17)(2, "div", 18);
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd()()();
} if (rf & 2) {
    const ctx_r3 = i0.ɵɵnextContext();
    i0.ɵɵstyleProp("background-image", "url(" + ctx_r3.background + ")");
    i0.ɵɵproperty("ngClass", ctx_r3.background ? "po-page-login-highlight-image" : "po-page-login-highlight-image-off");
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate(ctx_r3.highlightInfo);
} }
const _c0 = ["*"];
/**
 * @docsPrivate
 *
 * @description
 *
 * Componente para definição de cor de fundo e dos logotipos primário e secundário para os templates
 * de `po-page-login` e demais templates de login.
 */
export class PoPageBackgroundComponent {
    constructor(poLanguageService) {
        this.poLanguageService = poLanguageService;
        /**
         * @optional
         *
         * @description
         *
         * Evento disparado ao selecionar alguma opção no seletor de idiomas.
         * Para este evento será passado como parâmetro o valor de idioma selecionado.
         */
        this.selectedLanguage = new EventEmitter();
        this._showSelectLanguage = false;
    }
    /** Lista de idiomas para o combo box */
    set languagesList(value) {
        this._languagesList = value;
        this.setLanguageOptions();
    }
    get languagesList() {
        if (this._languagesList?.length) {
            return this._languagesList;
        }
        return poLanguageDefault;
    }
    /** Caminho para a logomarca localizada na parte superior. */
    set logo(value) {
        this._logo = isTypeof(value, 'string') && value.trim() ? value : undefined;
    }
    get logo() {
        return this._logo;
    }
    /**
     * @optional
     *
     * @description
     *
     * Caminho para a logomarca localizada no rodapé.
     */
    set secondaryLogo(value) {
        this._secondaryLogo = isTypeof(value, 'string') && value.trim() ? value : undefined;
    }
    get secondaryLogo() {
        return this._secondaryLogo;
    }
    /** Define se o seletor de idiomas deve ser exibido. */
    set showSelectLanguage(showSelectLanguage) {
        this._showSelectLanguage = convertToBoolean(showSelectLanguage);
    }
    get showSelectLanguage() {
        return this._showSelectLanguage;
    }
    ngOnInit() {
        this.selectedLanguageOption = this.initialSelectLanguage || this.poLanguageService.getShortLanguage();
    }
    onChangeLanguage() {
        this.selectedLanguage.emit(this.selectedLanguageOption);
    }
    get selectLanguageOptions() {
        return this._selectLanguageOptions;
    }
    setLanguageOptions() {
        this._selectLanguageOptions = this.languagesList.map(language => ({
            label: language.description,
            value: language.language
        }));
    }
}
PoPageBackgroundComponent.ɵfac = function PoPageBackgroundComponent_Factory(t) { return new (t || PoPageBackgroundComponent)(i0.ɵɵdirectiveInject(i1.PoLanguageService)); };
PoPageBackgroundComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: PoPageBackgroundComponent, selectors: [["po-page-background"]], inputs: { background: ["p-background", "background"], initialSelectLanguage: ["p-initial-language", "initialSelectLanguage"], hideLogo: ["p-hide-logo", "hideLogo"], highlightInfo: ["p-highlight-info", "highlightInfo"], languagesList: ["p-languages", "languagesList"], logo: ["p-logo", "logo"], secondaryLogo: ["p-secondary-logo", "secondaryLogo"], showSelectLanguage: ["p-show-select-language", "showSelectLanguage"] }, outputs: { selectedLanguage: "p-selected-language" }, ngContentSelectors: _c0, decls: 13, vars: 5, consts: [[1, "po-page-login-container"], [1, "po-page-login-panel"], ["class", "po-page-background-main-logo", "alt", "main-logo", 3, "po-page-background-hide-logo", "src", 4, "ngIf"], [1, "po-page-login-body"], [1, "po-page-login-panel-content"], [1, "po-page-background-footer", "po-sm-12"], [1, "po-page-background-footer-mobile-only"], [1, "po-page-background-footer-content"], ["class", "po-page-background-footer-select", 4, "ngIf"], [1, "po-page-background-secondary-logo", 3, "ngClass"], ["class", "po-page-background-secondary-logo-image", "alt", "secondary-logo", 3, "src", 4, "ngIf"], [3, "ngClass", "background-image", 4, "ngIf"], ["alt", "main-logo", 1, "po-page-background-main-logo", 3, "src"], [1, "po-page-background-footer-select"], ["name", "selectedLanguageOption", 3, "ngModel", "p-options", "ngModelChange", "p-change"], ["alt", "secondary-logo", 1, "po-page-background-secondary-logo-image", 3, "src"], [3, "ngClass"], [1, "po-page-login-highlight-text"], [1, "po-font-display"]], template: function PoPageBackgroundComponent_Template(rf, ctx) { if (rf & 1) {
        i0.ɵɵprojectionDef();
        i0.ɵɵelementStart(0, "div", 0)(1, "div", 1);
        i0.ɵɵtemplate(2, PoPageBackgroundComponent_img_2_Template, 1, 3, "img", 2);
        i0.ɵɵelementStart(3, "div", 3)(4, "div", 4);
        i0.ɵɵprojection(5);
        i0.ɵɵelementEnd()();
        i0.ɵɵelementStart(6, "div", 5);
        i0.ɵɵelement(7, "po-divider", 6);
        i0.ɵɵelementStart(8, "div", 7);
        i0.ɵɵtemplate(9, PoPageBackgroundComponent_div_9_Template, 2, 2, "div", 8);
        i0.ɵɵelementStart(10, "div", 9);
        i0.ɵɵtemplate(11, PoPageBackgroundComponent_img_11_Template, 1, 1, "img", 10);
        i0.ɵɵelementEnd()()()();
        i0.ɵɵtemplate(12, PoPageBackgroundComponent_div_12_Template, 4, 4, "div", 11);
        i0.ɵɵelementEnd();
    } if (rf & 2) {
        i0.ɵɵadvance(2);
        i0.ɵɵproperty("ngIf", ctx.logo);
        i0.ɵɵadvance(7);
        i0.ɵɵproperty("ngIf", ctx.showSelectLanguage);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngClass", ctx.showSelectLanguage ? "po-page-background-secondary-logo-right" : "po-page-background-secondary-logo-centered");
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngIf", ctx.secondaryLogo);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("ngIf", ctx.background);
    } }, dependencies: [i2.NgClass, i2.NgIf, i3.NgControlStatus, i3.NgModel, i1.PoDividerComponent, i1.PoSelectComponent], encapsulation: 2 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(PoPageBackgroundComponent, [{
        type: Component,
        args: [{ selector: 'po-page-background', template: "<div class=\"po-page-login-container\">\n  <div class=\"po-page-login-panel\">\n    <img\n      *ngIf=\"logo\"\n      class=\"po-page-background-main-logo\"\n      [class.po-page-background-hide-logo]=\"hideLogo\"\n      alt=\"main-logo\"\n      [src]=\"logo\"\n    />\n\n    <div class=\"po-page-login-body\">\n      <div class=\"po-page-login-panel-content\">\n        <ng-content></ng-content>\n      </div>\n    </div>\n    <div class=\"po-page-background-footer po-sm-12\">\n      <po-divider class=\"po-page-background-footer-mobile-only\"></po-divider>\n\n      <div class=\"po-page-background-footer-content\">\n        <div *ngIf=\"showSelectLanguage\" class=\"po-page-background-footer-select\">\n          <po-select\n            name=\"selectedLanguageOption\"\n            [(ngModel)]=\"selectedLanguageOption\"\n            [p-options]=\"selectLanguageOptions\"\n            (p-change)=\"onChangeLanguage()\"\n          >\n          </po-select>\n        </div>\n\n        <div\n          class=\"po-page-background-secondary-logo\"\n          [ngClass]=\"\n            showSelectLanguage\n              ? 'po-page-background-secondary-logo-right'\n              : 'po-page-background-secondary-logo-centered'\n          \"\n        >\n          <img\n            *ngIf=\"secondaryLogo\"\n            class=\"po-page-background-secondary-logo-image\"\n            alt=\"secondary-logo\"\n            [src]=\"secondaryLogo\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div\n    *ngIf=\"background\"\n    [ngClass]=\"background ? 'po-page-login-highlight-image' : 'po-page-login-highlight-image-off'\"\n    [style.background-image]=\"'url(' + background + ')'\"\n  >\n    <div class=\"po-page-login-highlight-text\">\n      <div class=\"po-font-display\">{{ highlightInfo }}</div>\n    </div>\n  </div>\n</div>\n" }]
    }], function () { return [{ type: i1.PoLanguageService }]; }, { background: [{
            type: Input,
            args: ['p-background']
        }], initialSelectLanguage: [{
            type: Input,
            args: ['p-initial-language']
        }], hideLogo: [{
            type: Input,
            args: ['p-hide-logo']
        }], highlightInfo: [{
            type: Input,
            args: ['p-highlight-info']
        }], selectedLanguage: [{
            type: Output,
            args: ['p-selected-language']
        }], languagesList: [{
            type: Input,
            args: ['p-languages']
        }], logo: [{
            type: Input,
            args: ['p-logo']
        }], secondaryLogo: [{
            type: Input,
            args: ['p-secondary-logo']
        }], showSelectLanguage: [{
            type: Input,
            args: ['p-show-select-language']
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tcGFnZS1iYWNrZ3JvdW5kLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3RlbXBsYXRlcy9zcmMvbGliL2NvbXBvbmVudHMvcG8tcGFnZS1iYWNrZ3JvdW5kL3BvLXBhZ2UtYmFja2dyb3VuZC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy90ZW1wbGF0ZXMvc3JjL2xpYi9jb21wb25lbnRzL3BvLXBhZ2UtYmFja2dyb3VuZC9wby1wYWdlLWJhY2tncm91bmQuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFVLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUUvRSxPQUFPLEVBQWlELGlCQUFpQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFFeEcsT0FBTyxFQUFFLGdCQUFnQixFQUFFLFFBQVEsRUFBRSxNQUFNLG9CQUFvQixDQUFDOzs7Ozs7SUNGNUQsMEJBTUU7OztJQUhBLCtEQUErQztJQUUvQyxtREFBWTs7OztJQVlWLCtCQUF5RSxvQkFBQTtJQUdyRSx5UEFBb0Msa0tBRXhCLGVBQUEseUJBQWtCLENBQUEsSUFGTTtJQUl0QyxpQkFBWSxFQUFBOzs7SUFKVixlQUFvQztJQUFwQyx1REFBb0MsMkNBQUE7OztJQWV0QywwQkFLRTs7O0lBREEsNERBQXFCOzs7SUFPL0IsK0JBSUMsY0FBQSxjQUFBO0lBRWdDLFlBQW1CO0lBQUEsaUJBQU0sRUFBQSxFQUFBOzs7SUFIeEQsb0VBQW9EO0lBRHBELG1IQUE4RjtJQUkvRCxlQUFtQjtJQUFuQiwwQ0FBbUI7OztBRDNDdEQ7Ozs7Ozs7R0FPRztBQUNILE1BQU0sT0FBTyx5QkFBeUI7SUE0RXBDLFlBQW1CLGlCQUFvQztRQUFwQyxzQkFBaUIsR0FBakIsaUJBQWlCLENBQW1CO1FBL0R2RDs7Ozs7OztXQU9H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UCxVQUFVO2tCQUFoQyxLQUFLO21CQUFDLGNBQWM7WUFHUSxxQkFBcUI7a0JBQWpELEtBQUs7bUJBQUMsb0JBQW9CO1lBR0wsUUFBUTtrQkFBN0IsS0FBSzttQkFBQyxhQUFhO1lBR08sYUFBYTtrQkFBdkMsS0FBSzttQkFBQyxrQkFBa0I7WUFVTSxnQkFBZ0I7a0JBQTlDLE1BQU07bUJBQUMscUJBQXFCO1lBV0gsYUFBYTtrQkFBdEMsS0FBSzttQkFBQyxhQUFhO1lBYUMsSUFBSTtrQkFBeEIsS0FBSzttQkFBQyxRQUFRO1lBZWdCLGFBQWE7a0JBQTNDLEtBQUs7bUJBQUMsa0JBQWtCO1lBU1ksa0JBQWtCO2tCQUF0RCxLQUFLO21CQUFDLHdCQUF3QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT25Jbml0LCBPdXRwdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgUG9TZWxlY3RPcHRpb24sIFBvTGFuZ3VhZ2VTZXJ2aWNlLCBQb0xhbmd1YWdlLCBwb0xhbmd1YWdlRGVmYXVsdCB9IGZyb20gJ0Bwby11aS9uZy1jb21wb25lbnRzJztcblxuaW1wb3J0IHsgY29udmVydFRvQm9vbGVhbiwgaXNUeXBlb2YgfSBmcm9tICcuLy4uLy4uL3V0aWxzL3V0aWwnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdwby1wYWdlLWJhY2tncm91bmQnLFxuICB0ZW1wbGF0ZVVybDogJy4vcG8tcGFnZS1iYWNrZ3JvdW5kLmNvbXBvbmVudC5odG1sJ1xufSlcblxuLyoqXG4gKiBAZG9jc1ByaXZhdGVcbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqXG4gKiBDb21wb25lbnRlIHBhcmEgZGVmaW5pw6fDo28gZGUgY29yIGRlIGZ1bmRvIGUgZG9zIGxvZ290aXBvcyBwcmltw6FyaW8gZSBzZWN1bmTDoXJpbyBwYXJhIG9zIHRlbXBsYXRlc1xuICogZGUgYHBvLXBhZ2UtbG9naW5gIGUgZGVtYWlzIHRlbXBsYXRlcyBkZSBsb2dpbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFBvUGFnZUJhY2tncm91bmRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICAvKiogSW5zZXJlIHVtYSBpbWFnZW0gZGUgZGVzdGFxdWUgYW8gbGFkbyBkaXJlaXRvIGRvIGNvbnRhaW5lci4gKi9cbiAgQElucHV0KCdwLWJhY2tncm91bmQnKSBiYWNrZ3JvdW5kPzogc3RyaW5nO1xuXG4gIC8qKiBJZGlvbWEgaW5pY2lhbCBzZWxlY2lvbmFkbyBubyBjb21ibyAqL1xuICBASW5wdXQoJ3AtaW5pdGlhbC1sYW5ndWFnZScpIGluaXRpYWxTZWxlY3RMYW5ndWFnZT86IHN0cmluZztcblxuICAvKiogRGVzaWduYSBzZSBvIGxvZ290aXBvIGRldmUgZGVzYXBhcmVjZXIgZW0gcmVzb2x1w6fDtWVzIG1lbm9yZXMuICovXG4gIEBJbnB1dCgncC1oaWRlLWxvZ28nKSBoaWRlTG9nbz86IGJvb2xlYW47XG5cbiAgLyoqIFRleHRvIGRlIGRlc3RhcXVlIHNvYnJlcG9zdG8gw6AgaW1hZ2VtIGRlIGRlc3RhcXVlLiBFc3NhIG9ww6fDo28gw6kgdXRpbGl6YWRhIGVtIGNvbmp1bnRvIGNvbSBvIGF0cmlidXRvIGBwLWJhY2tncm91bmRgLiAqL1xuICBASW5wdXQoJ3AtaGlnaGxpZ2h0LWluZm8nKSBoaWdobGlnaHRJbmZvPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIEV2ZW50byBkaXNwYXJhZG8gYW8gc2VsZWNpb25hciBhbGd1bWEgb3DDp8OjbyBubyBzZWxldG9yIGRlIGlkaW9tYXMuXG4gICAqIFBhcmEgZXN0ZSBldmVudG8gc2Vyw6EgcGFzc2FkbyBjb21vIHBhcsOibWV0cm8gbyB2YWxvciBkZSBpZGlvbWEgc2VsZWNpb25hZG8uXG4gICAqL1xuICBAT3V0cHV0KCdwLXNlbGVjdGVkLWxhbmd1YWdlJykgc2VsZWN0ZWRMYW5ndWFnZTogRXZlbnRFbWl0dGVyPHN0cmluZz4gPSBuZXcgRXZlbnRFbWl0dGVyPHN0cmluZz4oKTtcblxuICBzZWxlY3RlZExhbmd1YWdlT3B0aW9uOiBzdHJpbmc7XG5cbiAgcHJpdmF0ZSBfbG9nbz86IHN0cmluZztcbiAgcHJpdmF0ZSBfc2Vjb25kYXJ5TG9nbz86IHN0cmluZztcbiAgcHJpdmF0ZSBfc2hvd1NlbGVjdExhbmd1YWdlPzogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9sYW5ndWFnZXNMaXN0OiBBcnJheTxQb0xhbmd1YWdlPjtcbiAgcHJpdmF0ZSBfc2VsZWN0TGFuZ3VhZ2VPcHRpb25zOiBBcnJheTxQb1NlbGVjdE9wdGlvbj47XG5cbiAgLyoqIExpc3RhIGRlIGlkaW9tYXMgcGFyYSBvIGNvbWJvIGJveCAqL1xuICBASW5wdXQoJ3AtbGFuZ3VhZ2VzJykgc2V0IGxhbmd1YWdlc0xpc3QodmFsdWU6IEFycmF5PFBvTGFuZ3VhZ2U+KSB7XG4gICAgdGhpcy5fbGFuZ3VhZ2VzTGlzdCA9IHZhbHVlO1xuICAgIHRoaXMuc2V0TGFuZ3VhZ2VPcHRpb25zKCk7XG4gIH1cblxuICBnZXQgbGFuZ3VhZ2VzTGlzdCgpOiBBcnJheTxQb0xhbmd1YWdlPiB7XG4gICAgaWYgKHRoaXMuX2xhbmd1YWdlc0xpc3Q/Lmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2xhbmd1YWdlc0xpc3Q7XG4gICAgfVxuICAgIHJldHVybiBwb0xhbmd1YWdlRGVmYXVsdDtcbiAgfVxuXG4gIC8qKiBDYW1pbmhvIHBhcmEgYSBsb2dvbWFyY2EgbG9jYWxpemFkYSBuYSBwYXJ0ZSBzdXBlcmlvci4gKi9cbiAgQElucHV0KCdwLWxvZ28nKSBzZXQgbG9nbyh2YWx1ZTogYW55KSB7XG4gICAgdGhpcy5fbG9nbyA9IGlzVHlwZW9mKHZhbHVlLCAnc3RyaW5nJykgJiYgdmFsdWUudHJpbSgpID8gdmFsdWUgOiB1bmRlZmluZWQ7XG4gIH1cblxuICBnZXQgbG9nbygpIHtcbiAgICByZXR1cm4gdGhpcy5fbG9nbztcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIENhbWluaG8gcGFyYSBhIGxvZ29tYXJjYSBsb2NhbGl6YWRhIG5vIHJvZGFww6kuXG4gICAqL1xuICBASW5wdXQoJ3Atc2Vjb25kYXJ5LWxvZ28nKSBzZXQgc2Vjb25kYXJ5TG9nbyh2YWx1ZTogYW55KSB7XG4gICAgdGhpcy5fc2Vjb25kYXJ5TG9nbyA9IGlzVHlwZW9mKHZhbHVlLCAnc3RyaW5nJykgJiYgdmFsdWUudHJpbSgpID8gdmFsdWUgOiB1bmRlZmluZWQ7XG4gIH1cblxuICBnZXQgc2Vjb25kYXJ5TG9nbygpIHtcbiAgICByZXR1cm4gdGhpcy5fc2Vjb25kYXJ5TG9nbztcbiAgfVxuXG4gIC8qKiBEZWZpbmUgc2UgbyBzZWxldG9yIGRlIGlkaW9tYXMgZGV2ZSBzZXIgZXhpYmlkby4gKi9cbiAgQElucHV0KCdwLXNob3ctc2VsZWN0LWxhbmd1YWdlJykgc2V0IHNob3dTZWxlY3RMYW5ndWFnZShzaG93U2VsZWN0TGFuZ3VhZ2U6IGJvb2xlYW4pIHtcbiAgICB0aGlzLl9zaG93U2VsZWN0TGFuZ3VhZ2UgPSBjb252ZXJ0VG9Cb29sZWFuKHNob3dTZWxlY3RMYW5ndWFnZSk7XG4gIH1cbiAgZ2V0IHNob3dTZWxlY3RMYW5ndWFnZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fc2hvd1NlbGVjdExhbmd1YWdlO1xuICB9XG5cbiAgY29uc3RydWN0b3IocHVibGljIHBvTGFuZ3VhZ2VTZXJ2aWNlOiBQb0xhbmd1YWdlU2VydmljZSkge31cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLnNlbGVjdGVkTGFuZ3VhZ2VPcHRpb24gPSB0aGlzLmluaXRpYWxTZWxlY3RMYW5ndWFnZSB8fCB0aGlzLnBvTGFuZ3VhZ2VTZXJ2aWNlLmdldFNob3J0TGFuZ3VhZ2UoKTtcbiAgfVxuXG4gIG9uQ2hhbmdlTGFuZ3VhZ2UoKSB7XG4gICAgdGhpcy5zZWxlY3RlZExhbmd1YWdlLmVtaXQodGhpcy5zZWxlY3RlZExhbmd1YWdlT3B0aW9uKTtcbiAgfVxuXG4gIGdldCBzZWxlY3RMYW5ndWFnZU9wdGlvbnMoKTogQXJyYXk8UG9TZWxlY3RPcHRpb24+IHtcbiAgICByZXR1cm4gdGhpcy5fc2VsZWN0TGFuZ3VhZ2VPcHRpb25zO1xuICB9XG5cbiAgcHJpdmF0ZSBzZXRMYW5ndWFnZU9wdGlvbnMoKSB7XG4gICAgdGhpcy5fc2VsZWN0TGFuZ3VhZ2VPcHRpb25zID0gdGhpcy5sYW5ndWFnZXNMaXN0Lm1hcDxQb1NlbGVjdE9wdGlvbj4obGFuZ3VhZ2UgPT4gKHtcbiAgICAgIGxhYmVsOiBsYW5ndWFnZS5kZXNjcmlwdGlvbixcbiAgICAgIHZhbHVlOiBsYW5ndWFnZS5sYW5ndWFnZVxuICAgIH0pKTtcbiAgfVxufVxuIiwiPGRpdiBjbGFzcz1cInBvLXBhZ2UtbG9naW4tY29udGFpbmVyXCI+XG4gIDxkaXYgY2xhc3M9XCJwby1wYWdlLWxvZ2luLXBhbmVsXCI+XG4gICAgPGltZ1xuICAgICAgKm5nSWY9XCJsb2dvXCJcbiAgICAgIGNsYXNzPVwicG8tcGFnZS1iYWNrZ3JvdW5kLW1haW4tbG9nb1wiXG4gICAgICBbY2xhc3MucG8tcGFnZS1iYWNrZ3JvdW5kLWhpZGUtbG9nb109XCJoaWRlTG9nb1wiXG4gICAgICBhbHQ9XCJtYWluLWxvZ29cIlxuICAgICAgW3NyY109XCJsb2dvXCJcbiAgICAvPlxuXG4gICAgPGRpdiBjbGFzcz1cInBvLXBhZ2UtbG9naW4tYm9keVwiPlxuICAgICAgPGRpdiBjbGFzcz1cInBvLXBhZ2UtbG9naW4tcGFuZWwtY29udGVudFwiPlxuICAgICAgICA8bmctY29udGVudD48L25nLWNvbnRlbnQ+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwicG8tcGFnZS1iYWNrZ3JvdW5kLWZvb3RlciBwby1zbS0xMlwiPlxuICAgICAgPHBvLWRpdmlkZXIgY2xhc3M9XCJwby1wYWdlLWJhY2tncm91bmQtZm9vdGVyLW1vYmlsZS1vbmx5XCI+PC9wby1kaXZpZGVyPlxuXG4gICAgICA8ZGl2IGNsYXNzPVwicG8tcGFnZS1iYWNrZ3JvdW5kLWZvb3Rlci1jb250ZW50XCI+XG4gICAgICAgIDxkaXYgKm5nSWY9XCJzaG93U2VsZWN0TGFuZ3VhZ2VcIiBjbGFzcz1cInBvLXBhZ2UtYmFja2dyb3VuZC1mb290ZXItc2VsZWN0XCI+XG4gICAgICAgICAgPHBvLXNlbGVjdFxuICAgICAgICAgICAgbmFtZT1cInNlbGVjdGVkTGFuZ3VhZ2VPcHRpb25cIlxuICAgICAgICAgICAgWyhuZ01vZGVsKV09XCJzZWxlY3RlZExhbmd1YWdlT3B0aW9uXCJcbiAgICAgICAgICAgIFtwLW9wdGlvbnNdPVwic2VsZWN0TGFuZ3VhZ2VPcHRpb25zXCJcbiAgICAgICAgICAgIChwLWNoYW5nZSk9XCJvbkNoYW5nZUxhbmd1YWdlKClcIlxuICAgICAgICAgID5cbiAgICAgICAgICA8L3BvLXNlbGVjdD5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIGNsYXNzPVwicG8tcGFnZS1iYWNrZ3JvdW5kLXNlY29uZGFyeS1sb2dvXCJcbiAgICAgICAgICBbbmdDbGFzc109XCJcbiAgICAgICAgICAgIHNob3dTZWxlY3RMYW5ndWFnZVxuICAgICAgICAgICAgICA/ICdwby1wYWdlLWJhY2tncm91bmQtc2Vjb25kYXJ5LWxvZ28tcmlnaHQnXG4gICAgICAgICAgICAgIDogJ3BvLXBhZ2UtYmFja2dyb3VuZC1zZWNvbmRhcnktbG9nby1jZW50ZXJlZCdcbiAgICAgICAgICBcIlxuICAgICAgICA+XG4gICAgICAgICAgPGltZ1xuICAgICAgICAgICAgKm5nSWY9XCJzZWNvbmRhcnlMb2dvXCJcbiAgICAgICAgICAgIGNsYXNzPVwicG8tcGFnZS1iYWNrZ3JvdW5kLXNlY29uZGFyeS1sb2dvLWltYWdlXCJcbiAgICAgICAgICAgIGFsdD1cInNlY29uZGFyeS1sb2dvXCJcbiAgICAgICAgICAgIFtzcmNdPVwic2Vjb25kYXJ5TG9nb1wiXG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG5cbiAgPGRpdlxuICAgICpuZ0lmPVwiYmFja2dyb3VuZFwiXG4gICAgW25nQ2xhc3NdPVwiYmFja2dyb3VuZCA/ICdwby1wYWdlLWxvZ2luLWhpZ2hsaWdodC1pbWFnZScgOiAncG8tcGFnZS1sb2dpbi1oaWdobGlnaHQtaW1hZ2Utb2ZmJ1wiXG4gICAgW3N0eWxlLmJhY2tncm91bmQtaW1hZ2VdPVwiJ3VybCgnICsgYmFja2dyb3VuZCArICcpJ1wiXG4gID5cbiAgICA8ZGl2IGNsYXNzPVwicG8tcGFnZS1sb2dpbi1oaWdobGlnaHQtdGV4dFwiPlxuICAgICAgPGRpdiBjbGFzcz1cInBvLWZvbnQtZGlzcGxheVwiPnt7IGhpZ2hsaWdodEluZm8gfX08L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG48L2Rpdj5cbiJdfQ==