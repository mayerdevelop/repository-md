import { __decorate } from "tslib";
import { Component, Input, ViewChild } from '@angular/core';
import { InputBoolean } from '../../../../../decorators';
import { isIE } from '../../../../../utils/util';
import * as i0 from "@angular/core";
const _c0 = ["chartPath"];
const _c1 = ["po-chart-path", ""];
const pathDashoffsetDefaultWidth = 0;
export class PoChartPathComponent {
    constructor(changeDetector) {
        this.changeDetector = changeDetector;
        this.isActive = true;
        this.chartLine = false;
    }
    set color(value) {
        this._color = value.includes('po-color') && this.chartLine ? value.replace('po-color', 'po-border-color') : value;
    }
    get color() {
        return this._color;
    }
    set animate(value) {
        this._animate = value;
        if (!this.animate) {
            this.pathWidth = pathDashoffsetDefaultWidth;
        }
    }
    get animate() {
        return this._animate;
    }
    ngAfterViewInit() {
        if (!isIE()) {
            this.pathAnimation();
        }
    }
    pathAnimation() {
        this.pathWidth = this.chartPath.nativeElement.getTotalLength();
        this.changeDetector.detectChanges();
        setTimeout(this.preventsAnimatingAgain.bind(this), 700);
    }
    // Redefine pathWidth para zero após o período da animação para que a linha se expanda normalmente on resize.
    preventsAnimatingAgain() {
        this.pathWidth = pathDashoffsetDefaultWidth;
    }
}
PoChartPathComponent.ɵfac = function PoChartPathComponent_Factory(t) { return new (t || PoChartPathComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef)); };
PoChartPathComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: PoChartPathComponent, selectors: [["", "po-chart-path", ""]], viewQuery: function PoChartPathComponent_Query(rf, ctx) { if (rf & 1) {
        i0.ɵɵviewQuery(_c0, 7);
    } if (rf & 2) {
        let _t;
        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.chartPath = _t.first);
    } }, inputs: { isActive: ["p-is-active", "isActive"], chartLine: ["p-chart-line", "chartLine"], coordinates: ["p-coordinates", "coordinates"], color: ["p-color", "color"], animate: ["p-animate", "animate"] }, attrs: _c1, decls: 2, vars: 11, consts: [[1, "po-chart-path"], ["chartPath", ""]], template: function PoChartPathComponent_Template(rf, ctx) { if (rf & 1) {
        i0.ɵɵnamespaceSVG();
        i0.ɵɵelement(0, "path", 0, 1);
    } if (rf & 2) {
        i0.ɵɵclassMap((ctx.color == null ? null : ctx.color.includes("po-border-color")) || (ctx.color == null ? null : ctx.color.includes("po-color")) ? ctx.color : "");
        i0.ɵɵclassProp("po-chart-active-path", ctx.isActive)("po-chart-line-path", ctx.chartLine);
        i0.ɵɵattribute("fill", ctx.chartLine ? "none" : ctx.color)("stroke-dasharray", ctx.pathWidth)("stroke-dashoffset", ctx.pathWidth)("stroke", ctx.chartLine ? ctx.color : "")("d", ctx.coordinates);
    } }, encapsulation: 2 });
__decorate([
    InputBoolean()
], PoChartPathComponent.prototype, "isActive", void 0);
__decorate([
    InputBoolean()
], PoChartPathComponent.prototype, "chartLine", void 0);
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(PoChartPathComponent, [{
        type: Component,
        args: [{ selector: '[po-chart-path]', template: "<svg:path #chartPath\n  class=\"po-chart-path\"\n  [class.po-chart-active-path]=\"isActive\"\n  [class.po-chart-line-path]=\"chartLine\"\n  [class]=\"color?.includes('po-border-color') || color?.includes('po-color') ? color : ''\"\n  [attr.fill]=\"chartLine ? 'none' : color\"\n  [attr.stroke-dasharray]=\"pathWidth\"\n  [attr.stroke-dashoffset]=\"pathWidth\"\n  [attr.stroke]=\"chartLine ? color : ''\"\n  [attr.d]=\"coordinates\">\n</svg:path> " }]
    }], function () { return [{ type: i0.ChangeDetectorRef }]; }, { isActive: [{
            type: Input,
            args: ['p-is-active']
        }], chartLine: [{
            type: Input,
            args: ['p-chart-line']
        }], coordinates: [{
            type: Input,
            args: ['p-coordinates']
        }], chartPath: [{
            type: ViewChild,
            args: ['chartPath', { static: true }]
        }], color: [{
            type: Input,
            args: ['p-color']
        }], animate: [{
            type: Input,
            args: ['p-animate']
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tY2hhcnQtcGF0aC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy91aS9zcmMvbGliL2NvbXBvbmVudHMvcG8tY2hhcnQvcG8tY2hhcnQtY29udGFpbmVyL3BvLWNoYXJ0LWxpbmUvcG8tY2hhcnQtcGF0aC9wby1jaGFydC1wYXRoLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3VpL3NyYy9saWIvY29tcG9uZW50cy9wby1jaGFydC9wby1jaGFydC1jb250YWluZXIvcG8tY2hhcnQtbGluZS9wby1jaGFydC1wYXRoL3BvLWNoYXJ0LXBhdGguY29tcG9uZW50LnN2ZyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFvQyxTQUFTLEVBQWMsS0FBSyxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUUxRyxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFFekQsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLDJCQUEyQixDQUFDOzs7O0FBRWpELE1BQU0sMEJBQTBCLEdBQUcsQ0FBQyxDQUFDO0FBTXJDLE1BQU0sT0FBTyxvQkFBb0I7SUFrQy9CLFlBQW9CLGNBQWlDO1FBQWpDLG1CQUFjLEdBQWQsY0FBYyxDQUFtQjtRQWpDZixhQUFRLEdBQVksSUFBSSxDQUFDO1FBRXhCLGNBQVMsR0FBWSxLQUFLLENBQUM7SUErQlYsQ0FBQztJQXBCekQsSUFBc0IsS0FBSyxDQUFDLEtBQWE7UUFDdkMsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsVUFBVSxFQUFFLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztJQUNwSCxDQUFDO0lBRUQsSUFBSSxLQUFLO1FBQ1AsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3JCLENBQUM7SUFFRCxJQUF3QixPQUFPLENBQUMsS0FBYztRQUM1QyxJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztRQUV0QixJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUNqQixJQUFJLENBQUMsU0FBUyxHQUFHLDBCQUEwQixDQUFDO1NBQzdDO0lBQ0gsQ0FBQztJQUVELElBQUksT0FBTztRQUNULE9BQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUN2QixDQUFDO0lBSUQsZUFBZTtRQUNiLElBQUksQ0FBQyxJQUFJLEVBQUUsRUFBRTtZQUNYLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztTQUN0QjtJQUNILENBQUM7SUFFTyxhQUFhO1FBQ25CLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDL0QsSUFBSSxDQUFDLGNBQWMsQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUNwQyxVQUFVLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUMxRCxDQUFDO0lBRUQsNkdBQTZHO0lBQ3JHLHNCQUFzQjtRQUM1QixJQUFJLENBQUMsU0FBUyxHQUFHLDBCQUEwQixDQUFDO0lBQzlDLENBQUM7O3dGQW5EVSxvQkFBb0I7dUVBQXBCLG9CQUFvQjs7Ozs7O1FDWmpDLG1CQVN5QjtRQVR6Qiw2QkFVVzs7UUFOVCxpS0FBd0Y7UUFGeEYsb0RBQXVDLHFDQUFBO1FBR3ZDLDBEQUF3QyxtQ0FBQSxvQ0FBQSwwQ0FBQSxzQkFBQTs7QURRRjtJQUFmLFlBQVksRUFBRTtzREFBMEI7QUFFeEI7SUFBZixZQUFZLEVBQUU7dURBQTRCO3VGQUh2RCxvQkFBb0I7Y0FKaEMsU0FBUzsyQkFDRSxpQkFBaUI7b0VBSVcsUUFBUTtrQkFBN0MsS0FBSzttQkFBQyxhQUFhO1lBRW1CLFNBQVM7a0JBQS9DLEtBQUs7bUJBQUMsY0FBYztZQUVHLFdBQVc7a0JBQWxDLEtBQUs7bUJBQUMsZUFBZTtZQUVvQixTQUFTO2tCQUFsRCxTQUFTO21CQUFDLFdBQVcsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7WUFPbEIsS0FBSztrQkFBMUIsS0FBSzttQkFBQyxTQUFTO1lBUVEsT0FBTztrQkFBOUIsS0FBSzttQkFBQyxXQUFXIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWZ0ZXJWaWV3SW5pdCwgQ2hhbmdlRGV0ZWN0b3JSZWYsIENvbXBvbmVudCwgRWxlbWVudFJlZiwgSW5wdXQsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBJbnB1dEJvb2xlYW4gfSBmcm9tICcuLi8uLi8uLi8uLi8uLi9kZWNvcmF0b3JzJztcblxuaW1wb3J0IHsgaXNJRSB9IGZyb20gJy4uLy4uLy4uLy4uLy4uL3V0aWxzL3V0aWwnO1xuXG5jb25zdCBwYXRoRGFzaG9mZnNldERlZmF1bHRXaWR0aCA9IDA7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ1twby1jaGFydC1wYXRoXScsXG4gIHRlbXBsYXRlVXJsOiAnLi9wby1jaGFydC1wYXRoLmNvbXBvbmVudC5zdmcnXG59KVxuZXhwb3J0IGNsYXNzIFBvQ2hhcnRQYXRoQ29tcG9uZW50IGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCB7XG4gIEBJbnB1dCgncC1pcy1hY3RpdmUnKSBASW5wdXRCb29sZWFuKCkgaXNBY3RpdmU6IGJvb2xlYW4gPSB0cnVlO1xuXG4gIEBJbnB1dCgncC1jaGFydC1saW5lJykgQElucHV0Qm9vbGVhbigpIGNoYXJ0TGluZTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIEBJbnB1dCgncC1jb29yZGluYXRlcycpIGNvb3JkaW5hdGVzOiBzdHJpbmc7XG5cbiAgQFZpZXdDaGlsZCgnY2hhcnRQYXRoJywgeyBzdGF0aWM6IHRydWUgfSkgY2hhcnRQYXRoOiBFbGVtZW50UmVmO1xuXG4gIHBhdGhXaWR0aDogbnVtYmVyO1xuXG4gIHByaXZhdGUgX2FuaW1hdGU6IGJvb2xlYW47XG4gIHByaXZhdGUgX2NvbG9yOiBzdHJpbmc7XG5cbiAgQElucHV0KCdwLWNvbG9yJykgc2V0IGNvbG9yKHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLl9jb2xvciA9IHZhbHVlLmluY2x1ZGVzKCdwby1jb2xvcicpICYmIHRoaXMuY2hhcnRMaW5lID8gdmFsdWUucmVwbGFjZSgncG8tY29sb3InLCAncG8tYm9yZGVyLWNvbG9yJykgOiB2YWx1ZTtcbiAgfVxuXG4gIGdldCBjb2xvcigpIHtcbiAgICByZXR1cm4gdGhpcy5fY29sb3I7XG4gIH1cblxuICBASW5wdXQoJ3AtYW5pbWF0ZScpIHNldCBhbmltYXRlKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5fYW5pbWF0ZSA9IHZhbHVlO1xuXG4gICAgaWYgKCF0aGlzLmFuaW1hdGUpIHtcbiAgICAgIHRoaXMucGF0aFdpZHRoID0gcGF0aERhc2hvZmZzZXREZWZhdWx0V2lkdGg7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGFuaW1hdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FuaW1hdGU7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNoYW5nZURldGVjdG9yOiBDaGFuZ2VEZXRlY3RvclJlZikge31cblxuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgaWYgKCFpc0lFKCkpIHtcbiAgICAgIHRoaXMucGF0aEFuaW1hdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgcGF0aEFuaW1hdGlvbigpIHtcbiAgICB0aGlzLnBhdGhXaWR0aCA9IHRoaXMuY2hhcnRQYXRoLm5hdGl2ZUVsZW1lbnQuZ2V0VG90YWxMZW5ndGgoKTtcbiAgICB0aGlzLmNoYW5nZURldGVjdG9yLmRldGVjdENoYW5nZXMoKTtcbiAgICBzZXRUaW1lb3V0KHRoaXMucHJldmVudHNBbmltYXRpbmdBZ2Fpbi5iaW5kKHRoaXMpLCA3MDApO1xuICB9XG5cbiAgLy8gUmVkZWZpbmUgcGF0aFdpZHRoIHBhcmEgemVybyBhcMOzcyBvIHBlcsOtb2RvIGRhIGFuaW1hw6fDo28gcGFyYSBxdWUgYSBsaW5oYSBzZSBleHBhbmRhIG5vcm1hbG1lbnRlIG9uIHJlc2l6ZS5cbiAgcHJpdmF0ZSBwcmV2ZW50c0FuaW1hdGluZ0FnYWluKCkge1xuICAgIHRoaXMucGF0aFdpZHRoID0gcGF0aERhc2hvZmZzZXREZWZhdWx0V2lkdGg7XG4gIH1cbn1cbiIsIjxzdmc6cGF0aCAjY2hhcnRQYXRoXG4gIGNsYXNzPVwicG8tY2hhcnQtcGF0aFwiXG4gIFtjbGFzcy5wby1jaGFydC1hY3RpdmUtcGF0aF09XCJpc0FjdGl2ZVwiXG4gIFtjbGFzcy5wby1jaGFydC1saW5lLXBhdGhdPVwiY2hhcnRMaW5lXCJcbiAgW2NsYXNzXT1cImNvbG9yPy5pbmNsdWRlcygncG8tYm9yZGVyLWNvbG9yJykgfHwgY29sb3I/LmluY2x1ZGVzKCdwby1jb2xvcicpID8gY29sb3IgOiAnJ1wiXG4gIFthdHRyLmZpbGxdPVwiY2hhcnRMaW5lID8gJ25vbmUnIDogY29sb3JcIlxuICBbYXR0ci5zdHJva2UtZGFzaGFycmF5XT1cInBhdGhXaWR0aFwiXG4gIFthdHRyLnN0cm9rZS1kYXNob2Zmc2V0XT1cInBhdGhXaWR0aFwiXG4gIFthdHRyLnN0cm9rZV09XCJjaGFydExpbmUgPyBjb2xvciA6ICcnXCJcbiAgW2F0dHIuZF09XCJjb29yZGluYXRlc1wiPlxuPC9zdmc6cGF0aD4gIl19