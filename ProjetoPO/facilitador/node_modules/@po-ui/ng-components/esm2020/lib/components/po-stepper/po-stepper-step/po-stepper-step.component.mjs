import { Component, EventEmitter, Input, Output } from '@angular/core';
import { browserLanguage, convertToBoolean, isTypeof } from './../../../utils/util';
import { poLocaleDefault } from './../../../services/po-language/po-language.constant';
import { PoStepperOrientation } from '../enums/po-stepper-orientation.enum';
import { PoStepperStatus } from '../enums/po-stepper-status.enum';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "../po-stepper-circle/po-stepper-circle.component";
import * as i3 from "../po-stepper-label/po-stepper-label.component";
const poStepperStepSizeDefault = 24;
const poStepperStepSizeMax = 64;
const poStepLiteralsDefault = {
    en: { label: 'Step' },
    es: { label: 'Paso' },
    pt: { label: 'Passo' }
};
/**
 * @docsPrivate
 *
 * @description
 *
 * Componente que representa um *step* contendo as ligações das laterais (`po-stepper-step-bar`) e a label.
 */
export class PoStepperStepComponent {
    constructor() {
        // Evento que será emitido quando o status do *step* estiver ativo (`PoStepperStatus.Active`).
        this.activated = new EventEmitter();
        // Evento que será emitido ao clicar no *step*.
        this.click = new EventEmitter();
        // Evento que será emitido ao focar no *step* e pressionar a tecla *enter*.
        this.enter = new EventEmitter();
        this.literals = {
            ...poStepLiteralsDefault[poLocaleDefault],
            ...poStepLiteralsDefault[browserLanguage()]
        };
        this._stepIcons = false;
        this._stepSize = poStepperStepSizeDefault;
    }
    // Label do *step*.
    set label(value) {
        this._label = isTypeof(value, 'string') ? value : `${this.literals.label} ${this.circleContent}`;
    }
    get label() {
        return this._label;
    }
    // Define o estado de exibição.
    set status(value) {
        this._status = value ? value : undefined;
        if (this.status === PoStepperStatus.Active) {
            this.activated.emit();
        }
    }
    get status() {
        return this._status;
    }
    set stepIcons(stepIcons) {
        this._stepIcons = convertToBoolean(stepIcons);
    }
    get stepIcons() {
        return this._stepIcons;
    }
    // Tamanho do `step` em *pixels*, possibilitando um maior destaque.
    // O valor informado deve ser entre `24` e `64`.
    set stepSize(value) {
        this._stepSize =
            value >= poStepperStepSizeDefault && value <= poStepperStepSizeMax ? value : poStepperStepSizeDefault;
    }
    get stepSize() {
        return this._stepSize;
    }
    get halfStepSize() {
        return this.stepSize / 2;
    }
    get isVerticalOrientation() {
        return this.orientation === PoStepperOrientation.Vertical;
    }
    get marginHorizontalBar() {
        return this.isVerticalOrientation ? undefined : this.halfStepSize;
    }
    getStatusClass(status) {
        switch (status) {
            case PoStepperStatus.Active:
                return 'po-stepper-step-default';
            case PoStepperStatus.Disabled:
                return 'po-stepper-step-disabled';
            case PoStepperStatus.Done:
                return 'po-stepper-step-default';
            case PoStepperStatus.Error:
                return 'po-stepper-step-error';
            default:
                return 'po-stepper-step-default';
        }
    }
    onClick() {
        if (this.status !== PoStepperStatus.Disabled) {
            this.click.emit();
        }
    }
    onEnter() {
        if (this.status !== PoStepperStatus.Disabled) {
            this.enter.emit();
        }
    }
}
PoStepperStepComponent.ɵfac = function PoStepperStepComponent_Factory(t) { return new (t || PoStepperStepComponent)(); };
PoStepperStepComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: PoStepperStepComponent, selectors: [["po-stepper-step"]], inputs: { circleContent: ["p-circle-content", "circleContent"], orientation: ["p-orientation", "orientation"], nextStatus: ["p-next-status", "nextStatus"], label: ["p-label", "label"], status: ["p-status", "status"], stepIcons: ["p-step-icons", "stepIcons"], stepSize: ["p-step-size", "stepSize"] }, outputs: { activated: "p-activated", click: "p-click", enter: "p-enter" }, decls: 6, vars: 24, consts: [[1, "po-stepper-step", 3, "ngClass", "click", "keydown.enter"], [1, "po-stepper-step-container"], [3, "p-content", "p-icons", "p-size", "p-status"], [1, "po-stepper-step-label-position", 3, "p-content"]], template: function PoStepperStepComponent_Template(rf, ctx) { if (rf & 1) {
        i0.ɵɵelementStart(0, "div", 0);
        i0.ɵɵlistener("click", function PoStepperStepComponent_Template_div_click_0_listener() { return ctx.onClick(); })("keydown.enter", function PoStepperStepComponent_Template_div_keydown_enter_0_listener() { return ctx.onEnter(); });
        i0.ɵɵelementStart(1, "div", 1);
        i0.ɵɵelement(2, "div")(3, "po-stepper-circle", 2)(4, "div");
        i0.ɵɵelementEnd();
        i0.ɵɵelement(5, "po-stepper-label", 3);
        i0.ɵɵelementEnd();
    } if (rf & 2) {
        i0.ɵɵproperty("ngClass", ctx.getStatusClass(ctx.status));
        i0.ɵɵadvance(1);
        i0.ɵɵstyleProp("width", ctx.isVerticalOrientation ? ctx.stepSize : undefined, "px");
        i0.ɵɵadvance(1);
        i0.ɵɵstyleProp("margin-right", ctx.marginHorizontalBar, "px");
        i0.ɵɵclassProp("po-stepper-step-bar-top", ctx.isVerticalOrientation)("po-stepper-step-bar-left", !ctx.isVerticalOrientation);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("p-content", ctx.circleContent)("p-icons", ctx.stepIcons)("p-size", ctx.stepSize)("p-status", ctx.status);
        i0.ɵɵadvance(1);
        i0.ɵɵstyleProp("margin-left", ctx.marginHorizontalBar, "px");
        i0.ɵɵclassProp("po-stepper-step-bar-bottom", ctx.isVerticalOrientation)("po-stepper-step-bar-right", !ctx.isVerticalOrientation)("po-stepper-step-dashed-border", ctx.nextStatus === "disabled" && !ctx.isVerticalOrientation)("po-stepper-step-dashed-border-vertical", ctx.nextStatus === "disabled" && ctx.isVerticalOrientation);
        i0.ɵɵadvance(1);
        i0.ɵɵproperty("p-content", ctx.label);
    } }, dependencies: [i1.NgClass, i2.PoStepperCircleComponent, i3.PoStepperLabelComponent], encapsulation: 2 });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(PoStepperStepComponent, [{
        type: Component,
        args: [{ selector: 'po-stepper-step', template: "<div class=\"po-stepper-step\" [ngClass]=\"getStatusClass(status)\" (click)=\"onClick()\" (keydown.enter)=\"onEnter()\">\n  <div class=\"po-stepper-step-container\" [style.width.px]=\"isVerticalOrientation ? stepSize : undefined\">\n    <div\n      [class.po-stepper-step-bar-top]=\"isVerticalOrientation\"\n      [class.po-stepper-step-bar-left]=\"!isVerticalOrientation\"\n      [style.margin-right.px]=\"marginHorizontalBar\"\n    ></div>\n\n    <po-stepper-circle [p-content]=\"circleContent\" [p-icons]=\"stepIcons\" [p-size]=\"stepSize\" [p-status]=\"status\">\n    </po-stepper-circle>\n\n    <div\n      [class.po-stepper-step-bar-bottom]=\"isVerticalOrientation\"\n      [class.po-stepper-step-bar-right]=\"!isVerticalOrientation\"\n      [class.po-stepper-step-dashed-border]=\"nextStatus === 'disabled' && !isVerticalOrientation\"\n      [class.po-stepper-step-dashed-border-vertical]=\"nextStatus === 'disabled' && isVerticalOrientation\"\n      [style.margin-left.px]=\"marginHorizontalBar\"\n    ></div>\n  </div>\n\n  <po-stepper-label class=\"po-stepper-step-label-position\" [p-content]=\"label\"> </po-stepper-label>\n</div>\n" }]
    }], null, { circleContent: [{
            type: Input,
            args: ['p-circle-content']
        }], orientation: [{
            type: Input,
            args: ['p-orientation']
        }], nextStatus: [{
            type: Input,
            args: ['p-next-status']
        }], activated: [{
            type: Output,
            args: ['p-activated']
        }], click: [{
            type: Output,
            args: ['p-click']
        }], enter: [{
            type: Output,
            args: ['p-enter']
        }], label: [{
            type: Input,
            args: ['p-label']
        }], status: [{
            type: Input,
            args: ['p-status']
        }], stepIcons: [{
            type: Input,
            args: ['p-step-icons']
        }], stepSize: [{
            type: Input,
            args: ['p-step-size']
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tc3RlcHBlci1zdGVwLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3VpL3NyYy9saWIvY29tcG9uZW50cy9wby1zdGVwcGVyL3BvLXN0ZXBwZXItc3RlcC9wby1zdGVwcGVyLXN0ZXAuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvdWkvc3JjL2xpYi9jb21wb25lbnRzL3BvLXN0ZXBwZXIvcG8tc3RlcHBlci1zdGVwL3BvLXN0ZXBwZXItc3RlcC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRXZFLE9BQU8sRUFBRSxlQUFlLEVBQUUsZ0JBQWdCLEVBQUUsUUFBUSxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDcEYsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHNEQUFzRCxDQUFDO0FBQ3ZGLE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHNDQUFzQyxDQUFDO0FBQzVFLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQzs7Ozs7QUFFbEUsTUFBTSx3QkFBd0IsR0FBRyxFQUFFLENBQUM7QUFDcEMsTUFBTSxvQkFBb0IsR0FBRyxFQUFFLENBQUM7QUFDaEMsTUFBTSxxQkFBcUIsR0FBRztJQUM1QixFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFO0lBQ3JCLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUU7SUFDckIsRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRTtDQUN2QixDQUFDO0FBRUY7Ozs7OztHQU1HO0FBS0gsTUFBTSxPQUFPLHNCQUFzQjtJQUpuQztRQWNFLDhGQUE4RjtRQUN2RSxjQUFTLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUUzRCwrQ0FBK0M7UUFDNUIsVUFBSyxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7UUFFbkQsMkVBQTJFO1FBQ3hELFVBQUssR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDO1FBRTFDLGFBQVEsR0FBRztZQUNsQixHQUFHLHFCQUFxQixDQUFDLGVBQWUsQ0FBQztZQUN6QyxHQUFHLHFCQUFxQixDQUFDLGVBQWUsRUFBRSxDQUFDO1NBQzVDLENBQUM7UUFJTSxlQUFVLEdBQWEsS0FBSyxDQUFDO1FBQzdCLGNBQVMsR0FBVyx3QkFBd0IsQ0FBQztLQWlGdEQ7SUEvRUMsbUJBQW1CO0lBQ25CLElBQXNCLEtBQUssQ0FBQyxLQUFhO1FBQ3ZDLElBQUksQ0FBQyxNQUFNLEdBQUcsUUFBUSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUNuRyxDQUFDO0lBRUQsSUFBSSxLQUFLO1FBQ1AsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3JCLENBQUM7SUFFRCwrQkFBK0I7SUFDL0IsSUFBdUIsTUFBTSxDQUFDLEtBQXNCO1FBQ2xELElBQUksQ0FBQyxPQUFPLEdBQUksS0FBZ0IsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUM7UUFFckQsSUFBSSxJQUFJLENBQUMsTUFBTSxLQUFLLGVBQWUsQ0FBQyxNQUFNLEVBQUU7WUFDMUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztTQUN2QjtJQUNILENBQUM7SUFFRCxJQUFJLE1BQU07UUFDUixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUM7SUFDdEIsQ0FBQztJQUVELElBQTJCLFNBQVMsQ0FBQyxTQUFrQjtRQUNyRCxJQUFJLENBQUMsVUFBVSxHQUFHLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ2hELENBQUM7SUFFRCxJQUFJLFNBQVM7UUFDWCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDekIsQ0FBQztJQUVELG1FQUFtRTtJQUNuRSxnREFBZ0Q7SUFDaEQsSUFBMEIsUUFBUSxDQUFDLEtBQWE7UUFDOUMsSUFBSSxDQUFDLFNBQVM7WUFDWixLQUFLLElBQUksd0JBQXdCLElBQUksS0FBSyxJQUFJLG9CQUFvQixDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLHdCQUF3QixDQUFDO0lBQzFHLENBQUM7SUFFRCxJQUFJLFFBQVE7UUFDVixPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7SUFDeEIsQ0FBQztJQUVELElBQUksWUFBWTtRQUNkLE9BQU8sSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7SUFDM0IsQ0FBQztJQUVELElBQUkscUJBQXFCO1FBQ3ZCLE9BQU8sSUFBSSxDQUFDLFdBQVcsS0FBSyxvQkFBb0IsQ0FBQyxRQUFRLENBQUM7SUFDNUQsQ0FBQztJQUVELElBQUksbUJBQW1CO1FBQ3JCLE9BQU8sSUFBSSxDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUM7SUFDcEUsQ0FBQztJQUVELGNBQWMsQ0FBQyxNQUFjO1FBQzNCLFFBQVEsTUFBTSxFQUFFO1lBQ2QsS0FBSyxlQUFlLENBQUMsTUFBTTtnQkFDekIsT0FBTyx5QkFBeUIsQ0FBQztZQUNuQyxLQUFLLGVBQWUsQ0FBQyxRQUFRO2dCQUMzQixPQUFPLDBCQUEwQixDQUFDO1lBQ3BDLEtBQUssZUFBZSxDQUFDLElBQUk7Z0JBQ3ZCLE9BQU8seUJBQXlCLENBQUM7WUFDbkMsS0FBSyxlQUFlLENBQUMsS0FBSztnQkFDeEIsT0FBTyx1QkFBdUIsQ0FBQztZQUNqQztnQkFDRSxPQUFPLHlCQUF5QixDQUFDO1NBQ3BDO0lBQ0gsQ0FBQztJQUVELE9BQU87UUFDTCxJQUFJLElBQUksQ0FBQyxNQUFNLEtBQUssZUFBZSxDQUFDLFFBQVEsRUFBRTtZQUM1QyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDO1NBQ25CO0lBQ0gsQ0FBQztJQUVELE9BQU87UUFDTCxJQUFJLElBQUksQ0FBQyxNQUFNLEtBQUssZUFBZSxDQUFDLFFBQVEsRUFBRTtZQUM1QyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUFDO1NBQ25CO0lBQ0gsQ0FBQzs7NEZBM0dVLHNCQUFzQjt5RUFBdEIsc0JBQXNCO1FDMUJuQyw4QkFBZ0g7UUFBaEQsZ0dBQVMsYUFBUyxJQUFDLG1HQUFrQixhQUFTLElBQTNCO1FBQ2pGLDhCQUF1RztRQUNyRyxzQkFJTywyQkFBQSxVQUFBO1FBWVQsaUJBQU07UUFFTixzQ0FBaUc7UUFDbkcsaUJBQU07O1FBckJ1Qix3REFBa0M7UUFDdEIsZUFBK0Q7UUFBL0QsbUZBQStEO1FBSWxHLGVBQTZDO1FBQTdDLDZEQUE2QztRQUY3QyxvRUFBdUQsd0RBQUE7UUFLdEMsZUFBMkI7UUFBM0IsNkNBQTJCLDBCQUFBLHdCQUFBLHdCQUFBO1FBUTVDLGVBQTRDO1FBQTVDLDREQUE0QztRQUo1Qyx1RUFBMEQseURBQUEsOEZBQUEsc0dBQUE7UUFRTCxlQUFtQjtRQUFuQixxQ0FBbUI7O3VGRE1qRSxzQkFBc0I7Y0FKbEMsU0FBUzsyQkFDRSxpQkFBaUI7Z0JBS0EsYUFBYTtrQkFBdkMsS0FBSzttQkFBQyxrQkFBa0I7WUFHRCxXQUFXO2tCQUFsQyxLQUFLO21CQUFDLGVBQWU7WUFHRSxVQUFVO2tCQUFqQyxLQUFLO21CQUFDLGVBQWU7WUFHQyxTQUFTO2tCQUEvQixNQUFNO21CQUFDLGFBQWE7WUFHRixLQUFLO2tCQUF2QixNQUFNO21CQUFDLFNBQVM7WUFHRSxLQUFLO2tCQUF2QixNQUFNO21CQUFDLFNBQVM7WUFhSyxLQUFLO2tCQUExQixLQUFLO21CQUFDLFNBQVM7WUFTTyxNQUFNO2tCQUE1QixLQUFLO21CQUFDLFVBQVU7WUFZVSxTQUFTO2tCQUFuQyxLQUFLO21CQUFDLGNBQWM7WUFVSyxRQUFRO2tCQUFqQyxLQUFLO21CQUFDLGFBQWEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE91dHB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBicm93c2VyTGFuZ3VhZ2UsIGNvbnZlcnRUb0Jvb2xlYW4sIGlzVHlwZW9mIH0gZnJvbSAnLi8uLi8uLi8uLi91dGlscy91dGlsJztcbmltcG9ydCB7IHBvTG9jYWxlRGVmYXVsdCB9IGZyb20gJy4vLi4vLi4vLi4vc2VydmljZXMvcG8tbGFuZ3VhZ2UvcG8tbGFuZ3VhZ2UuY29uc3RhbnQnO1xuaW1wb3J0IHsgUG9TdGVwcGVyT3JpZW50YXRpb24gfSBmcm9tICcuLi9lbnVtcy9wby1zdGVwcGVyLW9yaWVudGF0aW9uLmVudW0nO1xuaW1wb3J0IHsgUG9TdGVwcGVyU3RhdHVzIH0gZnJvbSAnLi4vZW51bXMvcG8tc3RlcHBlci1zdGF0dXMuZW51bSc7XG5cbmNvbnN0IHBvU3RlcHBlclN0ZXBTaXplRGVmYXVsdCA9IDI0O1xuY29uc3QgcG9TdGVwcGVyU3RlcFNpemVNYXggPSA2NDtcbmNvbnN0IHBvU3RlcExpdGVyYWxzRGVmYXVsdCA9IHtcbiAgZW46IHsgbGFiZWw6ICdTdGVwJyB9LFxuICBlczogeyBsYWJlbDogJ1Bhc28nIH0sXG4gIHB0OiB7IGxhYmVsOiAnUGFzc28nIH1cbn07XG5cbi8qKlxuICogQGRvY3NQcml2YXRlXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogQ29tcG9uZW50ZSBxdWUgcmVwcmVzZW50YSB1bSAqc3RlcCogY29udGVuZG8gYXMgbGlnYcOnw7VlcyBkYXMgbGF0ZXJhaXMgKGBwby1zdGVwcGVyLXN0ZXAtYmFyYCkgZSBhIGxhYmVsLlxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdwby1zdGVwcGVyLXN0ZXAnLFxuICB0ZW1wbGF0ZVVybDogJ3BvLXN0ZXBwZXItc3RlcC5jb21wb25lbnQuaHRtbCdcbn0pXG5leHBvcnQgY2xhc3MgUG9TdGVwcGVyU3RlcENvbXBvbmVudCB7XG4gIC8vIENvbnRlw7pkbyBxdWUgc2Vyw6EgcmVwYXNzYWRvIHBhcmEgbyBjb21wb25lbnRlIGBwLWNpcmNsZS1jb250ZW50YCBhdHJhdsOpcyBkYSBwcm9wcmllZGFkZSBgcC1jb250ZW50YC5cbiAgQElucHV0KCdwLWNpcmNsZS1jb250ZW50JykgY2lyY2xlQ29udGVudDogYW55O1xuXG4gIC8vIERlZmluZSBhIG9yaWVudGHDp8OjbyBkZSBleGliacOnw6NvLlxuICBASW5wdXQoJ3Atb3JpZW50YXRpb24nKSBvcmllbnRhdGlvbjogUG9TdGVwcGVyT3JpZW50YXRpb247XG5cbiAgLy8gSW5mb3JtYSBvIHN0YXR1cyBkYSBwcm94aW1hIGV0YXBhLlxuICBASW5wdXQoJ3AtbmV4dC1zdGF0dXMnKSBuZXh0U3RhdHVzO1xuXG4gIC8vIEV2ZW50byBxdWUgc2Vyw6EgZW1pdGlkbyBxdWFuZG8gbyBzdGF0dXMgZG8gKnN0ZXAqIGVzdGl2ZXIgYXRpdm8gKGBQb1N0ZXBwZXJTdGF0dXMuQWN0aXZlYCkuXG4gIEBPdXRwdXQoJ3AtYWN0aXZhdGVkJykgYWN0aXZhdGVkID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgLy8gRXZlbnRvIHF1ZSBzZXLDoSBlbWl0aWRvIGFvIGNsaWNhciBubyAqc3RlcCouXG4gIEBPdXRwdXQoJ3AtY2xpY2snKSBjbGljayA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIC8vIEV2ZW50byBxdWUgc2Vyw6EgZW1pdGlkbyBhbyBmb2NhciBubyAqc3RlcCogZSBwcmVzc2lvbmFyIGEgdGVjbGEgKmVudGVyKi5cbiAgQE91dHB1dCgncC1lbnRlcicpIGVudGVyID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgcmVhZG9ubHkgbGl0ZXJhbHMgPSB7XG4gICAgLi4ucG9TdGVwTGl0ZXJhbHNEZWZhdWx0W3BvTG9jYWxlRGVmYXVsdF0sXG4gICAgLi4ucG9TdGVwTGl0ZXJhbHNEZWZhdWx0W2Jyb3dzZXJMYW5ndWFnZSgpXVxuICB9O1xuXG4gIHByaXZhdGUgX2xhYmVsOiBzdHJpbmc7XG4gIHByaXZhdGUgX3N0YXR1czogUG9TdGVwcGVyU3RhdHVzO1xuICBwcml2YXRlIF9zdGVwSWNvbnM/OiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX3N0ZXBTaXplOiBudW1iZXIgPSBwb1N0ZXBwZXJTdGVwU2l6ZURlZmF1bHQ7XG5cbiAgLy8gTGFiZWwgZG8gKnN0ZXAqLlxuICBASW5wdXQoJ3AtbGFiZWwnKSBzZXQgbGFiZWwodmFsdWU6IHN0cmluZykge1xuICAgIHRoaXMuX2xhYmVsID0gaXNUeXBlb2YodmFsdWUsICdzdHJpbmcnKSA/IHZhbHVlIDogYCR7dGhpcy5saXRlcmFscy5sYWJlbH0gJHt0aGlzLmNpcmNsZUNvbnRlbnR9YDtcbiAgfVxuXG4gIGdldCBsYWJlbCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9sYWJlbDtcbiAgfVxuXG4gIC8vIERlZmluZSBvIGVzdGFkbyBkZSBleGliacOnw6NvLlxuICBASW5wdXQoJ3Atc3RhdHVzJykgc2V0IHN0YXR1cyh2YWx1ZTogUG9TdGVwcGVyU3RhdHVzKSB7XG4gICAgdGhpcy5fc3RhdHVzID0gKHZhbHVlIGFzIHN0cmluZykgPyB2YWx1ZSA6IHVuZGVmaW5lZDtcblxuICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gUG9TdGVwcGVyU3RhdHVzLkFjdGl2ZSkge1xuICAgICAgdGhpcy5hY3RpdmF0ZWQuZW1pdCgpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBzdGF0dXMoKTogUG9TdGVwcGVyU3RhdHVzIHtcbiAgICByZXR1cm4gdGhpcy5fc3RhdHVzO1xuICB9XG5cbiAgQElucHV0KCdwLXN0ZXAtaWNvbnMnKSBzZXQgc3RlcEljb25zKHN0ZXBJY29uczogYm9vbGVhbikge1xuICAgIHRoaXMuX3N0ZXBJY29ucyA9IGNvbnZlcnRUb0Jvb2xlYW4oc3RlcEljb25zKTtcbiAgfVxuXG4gIGdldCBzdGVwSWNvbnMoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX3N0ZXBJY29ucztcbiAgfVxuXG4gIC8vIFRhbWFuaG8gZG8gYHN0ZXBgIGVtICpwaXhlbHMqLCBwb3NzaWJpbGl0YW5kbyB1bSBtYWlvciBkZXN0YXF1ZS5cbiAgLy8gTyB2YWxvciBpbmZvcm1hZG8gZGV2ZSBzZXIgZW50cmUgYDI0YCBlIGA2NGAuXG4gIEBJbnB1dCgncC1zdGVwLXNpemUnKSBzZXQgc3RlcFNpemUodmFsdWU6IG51bWJlcikge1xuICAgIHRoaXMuX3N0ZXBTaXplID1cbiAgICAgIHZhbHVlID49IHBvU3RlcHBlclN0ZXBTaXplRGVmYXVsdCAmJiB2YWx1ZSA8PSBwb1N0ZXBwZXJTdGVwU2l6ZU1heCA/IHZhbHVlIDogcG9TdGVwcGVyU3RlcFNpemVEZWZhdWx0O1xuICB9XG5cbiAgZ2V0IHN0ZXBTaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX3N0ZXBTaXplO1xuICB9XG5cbiAgZ2V0IGhhbGZTdGVwU2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnN0ZXBTaXplIC8gMjtcbiAgfVxuXG4gIGdldCBpc1ZlcnRpY2FsT3JpZW50YXRpb24oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMub3JpZW50YXRpb24gPT09IFBvU3RlcHBlck9yaWVudGF0aW9uLlZlcnRpY2FsO1xuICB9XG5cbiAgZ2V0IG1hcmdpbkhvcml6b250YWxCYXIoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5pc1ZlcnRpY2FsT3JpZW50YXRpb24gPyB1bmRlZmluZWQgOiB0aGlzLmhhbGZTdGVwU2l6ZTtcbiAgfVxuXG4gIGdldFN0YXR1c0NsYXNzKHN0YXR1czogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHN0YXR1cykge1xuICAgICAgY2FzZSBQb1N0ZXBwZXJTdGF0dXMuQWN0aXZlOlxuICAgICAgICByZXR1cm4gJ3BvLXN0ZXBwZXItc3RlcC1kZWZhdWx0JztcbiAgICAgIGNhc2UgUG9TdGVwcGVyU3RhdHVzLkRpc2FibGVkOlxuICAgICAgICByZXR1cm4gJ3BvLXN0ZXBwZXItc3RlcC1kaXNhYmxlZCc7XG4gICAgICBjYXNlIFBvU3RlcHBlclN0YXR1cy5Eb25lOlxuICAgICAgICByZXR1cm4gJ3BvLXN0ZXBwZXItc3RlcC1kZWZhdWx0JztcbiAgICAgIGNhc2UgUG9TdGVwcGVyU3RhdHVzLkVycm9yOlxuICAgICAgICByZXR1cm4gJ3BvLXN0ZXBwZXItc3RlcC1lcnJvcic7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gJ3BvLXN0ZXBwZXItc3RlcC1kZWZhdWx0JztcbiAgICB9XG4gIH1cblxuICBvbkNsaWNrKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnN0YXR1cyAhPT0gUG9TdGVwcGVyU3RhdHVzLkRpc2FibGVkKSB7XG4gICAgICB0aGlzLmNsaWNrLmVtaXQoKTtcbiAgICB9XG4gIH1cblxuICBvbkVudGVyKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnN0YXR1cyAhPT0gUG9TdGVwcGVyU3RhdHVzLkRpc2FibGVkKSB7XG4gICAgICB0aGlzLmVudGVyLmVtaXQoKTtcbiAgICB9XG4gIH1cbn1cbiIsIjxkaXYgY2xhc3M9XCJwby1zdGVwcGVyLXN0ZXBcIiBbbmdDbGFzc109XCJnZXRTdGF0dXNDbGFzcyhzdGF0dXMpXCIgKGNsaWNrKT1cIm9uQ2xpY2soKVwiIChrZXlkb3duLmVudGVyKT1cIm9uRW50ZXIoKVwiPlxuICA8ZGl2IGNsYXNzPVwicG8tc3RlcHBlci1zdGVwLWNvbnRhaW5lclwiIFtzdHlsZS53aWR0aC5weF09XCJpc1ZlcnRpY2FsT3JpZW50YXRpb24gPyBzdGVwU2l6ZSA6IHVuZGVmaW5lZFwiPlxuICAgIDxkaXZcbiAgICAgIFtjbGFzcy5wby1zdGVwcGVyLXN0ZXAtYmFyLXRvcF09XCJpc1ZlcnRpY2FsT3JpZW50YXRpb25cIlxuICAgICAgW2NsYXNzLnBvLXN0ZXBwZXItc3RlcC1iYXItbGVmdF09XCIhaXNWZXJ0aWNhbE9yaWVudGF0aW9uXCJcbiAgICAgIFtzdHlsZS5tYXJnaW4tcmlnaHQucHhdPVwibWFyZ2luSG9yaXpvbnRhbEJhclwiXG4gICAgPjwvZGl2PlxuXG4gICAgPHBvLXN0ZXBwZXItY2lyY2xlIFtwLWNvbnRlbnRdPVwiY2lyY2xlQ29udGVudFwiIFtwLWljb25zXT1cInN0ZXBJY29uc1wiIFtwLXNpemVdPVwic3RlcFNpemVcIiBbcC1zdGF0dXNdPVwic3RhdHVzXCI+XG4gICAgPC9wby1zdGVwcGVyLWNpcmNsZT5cblxuICAgIDxkaXZcbiAgICAgIFtjbGFzcy5wby1zdGVwcGVyLXN0ZXAtYmFyLWJvdHRvbV09XCJpc1ZlcnRpY2FsT3JpZW50YXRpb25cIlxuICAgICAgW2NsYXNzLnBvLXN0ZXBwZXItc3RlcC1iYXItcmlnaHRdPVwiIWlzVmVydGljYWxPcmllbnRhdGlvblwiXG4gICAgICBbY2xhc3MucG8tc3RlcHBlci1zdGVwLWRhc2hlZC1ib3JkZXJdPVwibmV4dFN0YXR1cyA9PT0gJ2Rpc2FibGVkJyAmJiAhaXNWZXJ0aWNhbE9yaWVudGF0aW9uXCJcbiAgICAgIFtjbGFzcy5wby1zdGVwcGVyLXN0ZXAtZGFzaGVkLWJvcmRlci12ZXJ0aWNhbF09XCJuZXh0U3RhdHVzID09PSAnZGlzYWJsZWQnICYmIGlzVmVydGljYWxPcmllbnRhdGlvblwiXG4gICAgICBbc3R5bGUubWFyZ2luLWxlZnQucHhdPVwibWFyZ2luSG9yaXpvbnRhbEJhclwiXG4gICAgPjwvZGl2PlxuICA8L2Rpdj5cblxuICA8cG8tc3RlcHBlci1sYWJlbCBjbGFzcz1cInBvLXN0ZXBwZXItc3RlcC1sYWJlbC1wb3NpdGlvblwiIFtwLWNvbnRlbnRdPVwibGFiZWxcIj4gPC9wby1zdGVwcGVyLWxhYmVsPlxuPC9kaXY+XG4iXX0=