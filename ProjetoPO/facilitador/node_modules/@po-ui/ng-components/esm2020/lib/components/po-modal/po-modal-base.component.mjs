import { Input, EventEmitter, Directive } from '@angular/core';
import { convertToBoolean } from './../../utils/util';
import { poModalLiterals } from './po-modal.literals';
import * as i0 from "@angular/core";
import * as i1 from "../../services/po-language/po-language.service";
/**
 * @description
 *
 * O componente `po-modal` é utilizado para incluir conteúdos rápidos e informativos.
 *
 * No cabeçalho do componente é possível definir um título e como também permite ocultar o ícone de fechamento da modal.
 *
 * Em seu corpo é possível definir um conteúdo informativo, podendo utilizar componentes como por exemplo `po-chart`,
 * `po-table` e os demais componentes do PO.
 *
 * No rodapé encontram-se os botões de ação primária e secundária, no qual permitem definir uma ação e um rótulo, bem como
 * definir um estado de carregando e / ou desabilitado e / ou definir o botão com o tipo *danger*. Também é possível utilizar
 * o componente [`PoModalFooter`](/documentation/po-modal-footer).
 *
 * > É possível fechar a modal através da tecla *ESC*, quando a propriedade `p-hide-close` não estiver habilitada.
 */
export class PoModalBaseComponent {
    constructor(poLanguageService) {
        // Controla se a modal fica oculto ou visível, por padrão é oculto
        this.isHidden = true;
        // Event emmiter para quando a modal é fechada pelo 'X'.
        this.onXClosed = new EventEmitter();
        this._hideClose = false;
        this._size = 'md';
        /**
         * Define o fechamento da modal ao clicar fora da mesma.
         * Informe o valor `true` para ativar o fechamento ao clicar fora da modal.
         */
        // eslint-disable-next-line @typescript-eslint/member-ordering
        this.clickOut = false;
        this.language = poLanguageService.getShortLanguage();
        this.literals = {
            ...poModalLiterals[this.language]
        };
    }
    /**
     * Define o tamanho da modal.
     *
     * Valores válidos:
     *  - `sm` (pequeno)
     *  - `md` (médio)
     *  - `lg` (grande)
     *  - `xl` (extra grande)
     *  - `auto` (automático)
     *
     * > Quando informado `auto` a modal calculará automaticamente seu tamanho baseado em seu conteúdo.
     * Caso não seja informado um valor, a modal terá o tamanho definido como `md`.
     *
     * > Todas as opções de tamanho possuem uma largura máxima de **768px**.
     */
    set size(value) {
        const sizes = ['sm', 'md', 'lg', 'xl', 'auto'];
        this._size = sizes.indexOf(value) > -1 ? value : 'md';
    }
    get size() {
        return this._size;
    }
    set setClickOut(value) {
        this.clickOut = value === '' ? false : convertToBoolean(value);
    }
    /**
     * @optional
     *
     * @description
     *
     * Oculta o ícone de fechar do cabeçalho da modal.
     *
     * > Caso a propriedade estiver habilitada, não será possível fechar a modal através da tecla *ESC*.
     *
     * @default `false`
     */
    set hideClose(value) {
        this._hideClose = convertToBoolean(value);
    }
    get hideClose() {
        return this._hideClose;
    }
    /** Função para fechar a modal. */
    close(xClosed = false) {
        this.isHidden = true;
        if (xClosed) {
            this.onXClosed.emit(xClosed);
        }
    }
    /** Função para abrir a modal. */
    open() {
        this.validPrimaryAction();
        this.isHidden = false;
    }
    validPrimaryAction() {
        if (!this.primaryAction) {
            this.primaryAction = {
                action: () => this.close(),
                label: this.literals.close
            };
        }
        if (!this.primaryAction['action']) {
            this.primaryAction['action'] = () => this.close();
        }
        if (!this.primaryAction['label']) {
            this.primaryAction['label'] = this.literals.close;
        }
    }
}
PoModalBaseComponent.ɵfac = function PoModalBaseComponent_Factory(t) { return new (t || PoModalBaseComponent)(i0.ɵɵdirectiveInject(i1.PoLanguageService)); };
PoModalBaseComponent.ɵdir = /*@__PURE__*/ i0.ɵɵdefineDirective({ type: PoModalBaseComponent, inputs: { title: ["p-title", "title"], primaryAction: ["p-primary-action", "primaryAction"], secondaryAction: ["p-secondary-action", "secondaryAction"], size: ["p-size", "size"], setClickOut: ["p-click-out", "setClickOut"], hideClose: ["p-hide-close", "hideClose"] } });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(PoModalBaseComponent, [{
        type: Directive
    }], function () { return [{ type: i1.PoLanguageService }]; }, { title: [{
            type: Input,
            args: ['p-title']
        }], primaryAction: [{
            type: Input,
            args: ['p-primary-action']
        }], secondaryAction: [{
            type: Input,
            args: ['p-secondary-action']
        }], size: [{
            type: Input,
            args: ['p-size']
        }], setClickOut: [{
            type: Input,
            args: ['p-click-out']
        }], hideClose: [{
            type: Input,
            args: ['p-hide-close']
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tbW9kYWwtYmFzZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy91aS9zcmMvbGliL2NvbXBvbmVudHMvcG8tbW9kYWwvcG8tbW9kYWwtYmFzZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLEtBQUssRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRS9ELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBSXRELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQzs7O0FBRXREOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE1BQU0sT0FBTyxvQkFBb0I7SUErRS9CLFlBQVksaUJBQW9DO1FBOURoRCxrRUFBa0U7UUFDbEUsYUFBUSxHQUFHLElBQUksQ0FBQztRQUVoQix3REFBd0Q7UUFDakQsY0FBUyxHQUFHLElBQUksWUFBWSxFQUFXLENBQUM7UUFFdkMsZUFBVSxHQUFhLEtBQUssQ0FBQztRQUM3QixVQUFLLEdBQVksSUFBSSxDQUFDO1FBMEI5Qjs7O1dBR0c7UUFDSCw4REFBOEQ7UUFDOUQsYUFBUSxHQUFhLEtBQUssQ0FBQztRQXlCekIsSUFBSSxDQUFDLFFBQVEsR0FBRyxpQkFBaUIsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1FBRXJELElBQUksQ0FBQyxRQUFRLEdBQUc7WUFDZCxHQUFHLGVBQWUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDO1NBQ2xDLENBQUM7SUFDSixDQUFDO0lBM0REOzs7Ozs7Ozs7Ozs7OztPQWNHO0lBQ0gsSUFBcUIsSUFBSSxDQUFDLEtBQWE7UUFDckMsTUFBTSxLQUFLLEdBQUcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDL0MsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztJQUN4RCxDQUFDO0lBRUQsSUFBSSxJQUFJO1FBQ04sT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3BCLENBQUM7SUFRRCxJQUEwQixXQUFXLENBQUMsS0FBdUI7UUFDM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2pFLENBQUM7SUFFRDs7Ozs7Ozs7OztPQVVHO0lBQ0gsSUFBMkIsU0FBUyxDQUFDLEtBQWM7UUFDakQsSUFBSSxDQUFDLFVBQVUsR0FBRyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBRUQsSUFBSSxTQUFTO1FBQ1gsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDO0lBQ3pCLENBQUM7SUFVRCxrQ0FBa0M7SUFDbEMsS0FBSyxDQUFDLE9BQU8sR0FBRyxLQUFLO1FBQ25CLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1FBQ3JCLElBQUksT0FBTyxFQUFFO1lBQ1gsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7U0FDOUI7SUFDSCxDQUFDO0lBRUQsaUNBQWlDO0lBQ2pDLElBQUk7UUFDRixJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztRQUUxQixJQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztJQUN4QixDQUFDO0lBRUQsa0JBQWtCO1FBQ2hCLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFO1lBQ3ZCLElBQUksQ0FBQyxhQUFhLEdBQUc7Z0JBQ25CLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFO2dCQUMxQixLQUFLLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLO2FBQzNCLENBQUM7U0FDSDtRQUVELElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQ2pDLElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO1NBQ25EO1FBQ0QsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFDaEMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQztTQUNuRDtJQUNILENBQUM7O3dGQXBIVSxvQkFBb0I7dUVBQXBCLG9CQUFvQjt1RkFBcEIsb0JBQW9CO2NBRGhDLFNBQVM7b0VBR1UsS0FBSztrQkFBdEIsS0FBSzttQkFBQyxTQUFTO1lBT1csYUFBYTtrQkFBdkMsS0FBSzttQkFBQyxrQkFBa0I7WUFHSSxlQUFlO2tCQUEzQyxLQUFLO21CQUFDLG9CQUFvQjtZQTZCTixJQUFJO2tCQUF4QixLQUFLO21CQUFDLFFBQVE7WUFlVyxXQUFXO2tCQUFwQyxLQUFLO21CQUFDLGFBQWE7WUFlTyxTQUFTO2tCQUFuQyxLQUFLO21CQUFDLGNBQWMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbnB1dCwgRXZlbnRFbWl0dGVyLCBEaXJlY3RpdmUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgY29udmVydFRvQm9vbGVhbiB9IGZyb20gJy4vLi4vLi4vdXRpbHMvdXRpbCc7XG5pbXBvcnQgeyBQb01vZGFsQWN0aW9uIH0gZnJvbSAnLi9wby1tb2RhbC1hY3Rpb24uaW50ZXJmYWNlJztcblxuaW1wb3J0IHsgUG9MYW5ndWFnZVNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9wby1sYW5ndWFnZS9wby1sYW5ndWFnZS5zZXJ2aWNlJztcbmltcG9ydCB7IHBvTW9kYWxMaXRlcmFscyB9IGZyb20gJy4vcG8tbW9kYWwubGl0ZXJhbHMnO1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqIE8gY29tcG9uZW50ZSBgcG8tbW9kYWxgIMOpIHV0aWxpemFkbyBwYXJhIGluY2x1aXIgY29udGXDumRvcyByw6FwaWRvcyBlIGluZm9ybWF0aXZvcy5cbiAqXG4gKiBObyBjYWJlw6dhbGhvIGRvIGNvbXBvbmVudGUgw6kgcG9zc8OtdmVsIGRlZmluaXIgdW0gdMOtdHVsbyBlIGNvbW8gdGFtYsOpbSBwZXJtaXRlIG9jdWx0YXIgbyDDrWNvbmUgZGUgZmVjaGFtZW50byBkYSBtb2RhbC5cbiAqXG4gKiBFbSBzZXUgY29ycG8gw6kgcG9zc8OtdmVsIGRlZmluaXIgdW0gY29udGXDumRvIGluZm9ybWF0aXZvLCBwb2RlbmRvIHV0aWxpemFyIGNvbXBvbmVudGVzIGNvbW8gcG9yIGV4ZW1wbG8gYHBvLWNoYXJ0YCxcbiAqIGBwby10YWJsZWAgZSBvcyBkZW1haXMgY29tcG9uZW50ZXMgZG8gUE8uXG4gKlxuICogTm8gcm9kYXDDqSBlbmNvbnRyYW0tc2Ugb3MgYm90w7VlcyBkZSBhw6fDo28gcHJpbcOhcmlhIGUgc2VjdW5kw6FyaWEsIG5vIHF1YWwgcGVybWl0ZW0gZGVmaW5pciB1bWEgYcOnw6NvIGUgdW0gcsOzdHVsbywgYmVtIGNvbW9cbiAqIGRlZmluaXIgdW0gZXN0YWRvIGRlIGNhcnJlZ2FuZG8gZSAvIG91IGRlc2FiaWxpdGFkbyBlIC8gb3UgZGVmaW5pciBvIGJvdMOjbyBjb20gbyB0aXBvICpkYW5nZXIqLiBUYW1iw6ltIMOpIHBvc3PDrXZlbCB1dGlsaXphclxuICogbyBjb21wb25lbnRlIFtgUG9Nb2RhbEZvb3RlcmBdKC9kb2N1bWVudGF0aW9uL3BvLW1vZGFsLWZvb3RlcikuXG4gKlxuICogPiDDiSBwb3Nzw612ZWwgZmVjaGFyIGEgbW9kYWwgYXRyYXbDqXMgZGEgdGVjbGEgKkVTQyosIHF1YW5kbyBhIHByb3ByaWVkYWRlIGBwLWhpZGUtY2xvc2VgIG7Do28gZXN0aXZlciBoYWJpbGl0YWRhLlxuICovXG5ARGlyZWN0aXZlKClcbmV4cG9ydCBjbGFzcyBQb01vZGFsQmFzZUNvbXBvbmVudCB7XG4gIC8qKiBUw610dWxvIGRhIG1vZGFsLiAqL1xuICBASW5wdXQoJ3AtdGl0bGUnKSB0aXRsZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBEZXZlIHNlciBkZWZpbmlkbyB1bSBvYmpldG8gcXVlIGltcGxlbWVudGEgYSBpbnRlcmZhY2UgYFBvTW9kYWxBY3Rpb25gIGNvbnRlbmRvIGEgbGFiZWwgZSBhIGZ1bsOnw6NvIGRhIHByaW1laXJhIGHDp8Ojby5cbiAgICogQ2FzbyBlc3RhIHByb3ByaWVkYWRlIG7Do28gc2VqYSBkZWZpbmlkYSBvdSBlc3RlamEgaW5jb21wbGV0YSwgYXV0b21hdGljYW1lbnRlIHNlcsOhIGFkaWNpb25hZG8gdW0gYm90w6NvIGRlIGHDp8OjbyBjb21cbiAgICogYSBmdW7Dp8OjbyBkZSBmZWNoYXIgYSBtb2RhbC5cbiAgICovXG4gIEBJbnB1dCgncC1wcmltYXJ5LWFjdGlvbicpIHByaW1hcnlBY3Rpb24/OiBQb01vZGFsQWN0aW9uO1xuXG4gIC8qKiBEZXZlIHNlciBkZWZpbmlkbyB1bSBvYmpldG8gcXVlIGltcGxlbWVudGEgYSBpbnRlcmZhY2UgYFBvTW9kYWxBY3Rpb25gIGNvbnRlbmRvIGEgbGFiZWwgZSBhIGZ1bsOnw6NvIGRhIHNlZ3VuZGEgYcOnw6NvLiAqL1xuICBASW5wdXQoJ3Atc2Vjb25kYXJ5LWFjdGlvbicpIHNlY29uZGFyeUFjdGlvbj86IFBvTW9kYWxBY3Rpb247XG5cbiAgbGFuZ3VhZ2U7XG4gIGxpdGVyYWxzO1xuXG4gIC8vIENvbnRyb2xhIHNlIGEgbW9kYWwgZmljYSBvY3VsdG8gb3Ugdmlzw612ZWwsIHBvciBwYWRyw6NvIMOpIG9jdWx0b1xuICBpc0hpZGRlbiA9IHRydWU7XG5cbiAgLy8gRXZlbnQgZW1taXRlciBwYXJhIHF1YW5kbyBhIG1vZGFsIMOpIGZlY2hhZGEgcGVsbyAnWCcuXG4gIHB1YmxpYyBvblhDbG9zZWQgPSBuZXcgRXZlbnRFbWl0dGVyPGJvb2xlYW4+KCk7XG5cbiAgcHJpdmF0ZSBfaGlkZUNsb3NlPzogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9zaXplPzogc3RyaW5nID0gJ21kJztcblxuICAvKipcbiAgICogRGVmaW5lIG8gdGFtYW5obyBkYSBtb2RhbC5cbiAgICpcbiAgICogVmFsb3JlcyB2w6FsaWRvczpcbiAgICogIC0gYHNtYCAocGVxdWVubylcbiAgICogIC0gYG1kYCAobcOpZGlvKVxuICAgKiAgLSBgbGdgIChncmFuZGUpXG4gICAqICAtIGB4bGAgKGV4dHJhIGdyYW5kZSlcbiAgICogIC0gYGF1dG9gIChhdXRvbcOhdGljbylcbiAgICpcbiAgICogPiBRdWFuZG8gaW5mb3JtYWRvIGBhdXRvYCBhIG1vZGFsIGNhbGN1bGFyw6EgYXV0b21hdGljYW1lbnRlIHNldSB0YW1hbmhvIGJhc2VhZG8gZW0gc2V1IGNvbnRlw7pkby5cbiAgICogQ2FzbyBuw6NvIHNlamEgaW5mb3JtYWRvIHVtIHZhbG9yLCBhIG1vZGFsIHRlcsOhIG8gdGFtYW5obyBkZWZpbmlkbyBjb21vIGBtZGAuXG4gICAqXG4gICAqID4gVG9kYXMgYXMgb3DDp8O1ZXMgZGUgdGFtYW5obyBwb3NzdWVtIHVtYSBsYXJndXJhIG3DoXhpbWEgZGUgKio3NjhweCoqLlxuICAgKi9cbiAgQElucHV0KCdwLXNpemUnKSBzZXQgc2l6ZSh2YWx1ZTogc3RyaW5nKSB7XG4gICAgY29uc3Qgc2l6ZXMgPSBbJ3NtJywgJ21kJywgJ2xnJywgJ3hsJywgJ2F1dG8nXTtcbiAgICB0aGlzLl9zaXplID0gc2l6ZXMuaW5kZXhPZih2YWx1ZSkgPiAtMSA/IHZhbHVlIDogJ21kJztcbiAgfVxuXG4gIGdldCBzaXplKCkge1xuICAgIHJldHVybiB0aGlzLl9zaXplO1xuICB9XG5cbiAgLyoqXG4gICAqIERlZmluZSBvIGZlY2hhbWVudG8gZGEgbW9kYWwgYW8gY2xpY2FyIGZvcmEgZGEgbWVzbWEuXG4gICAqIEluZm9ybWUgbyB2YWxvciBgdHJ1ZWAgcGFyYSBhdGl2YXIgbyBmZWNoYW1lbnRvIGFvIGNsaWNhciBmb3JhIGRhIG1vZGFsLlxuICAgKi9cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9tZW1iZXItb3JkZXJpbmdcbiAgY2xpY2tPdXQ/OiBib29sZWFuID0gZmFsc2U7XG4gIEBJbnB1dCgncC1jbGljay1vdXQnKSBzZXQgc2V0Q2xpY2tPdXQodmFsdWU6IGJvb2xlYW4gfCBzdHJpbmcpIHtcbiAgICB0aGlzLmNsaWNrT3V0ID0gdmFsdWUgPT09ICcnID8gZmFsc2UgOiBjb252ZXJ0VG9Cb29sZWFuKHZhbHVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIE9jdWx0YSBvIMOtY29uZSBkZSBmZWNoYXIgZG8gY2FiZcOnYWxobyBkYSBtb2RhbC5cbiAgICpcbiAgICogPiBDYXNvIGEgcHJvcHJpZWRhZGUgZXN0aXZlciBoYWJpbGl0YWRhLCBuw6NvIHNlcsOhIHBvc3PDrXZlbCBmZWNoYXIgYSBtb2RhbCBhdHJhdsOpcyBkYSB0ZWNsYSAqRVNDKi5cbiAgICpcbiAgICogQGRlZmF1bHQgYGZhbHNlYFxuICAgKi9cbiAgQElucHV0KCdwLWhpZGUtY2xvc2UnKSBzZXQgaGlkZUNsb3NlKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5faGlkZUNsb3NlID0gY29udmVydFRvQm9vbGVhbih2YWx1ZSk7XG4gIH1cblxuICBnZXQgaGlkZUNsb3NlKCkge1xuICAgIHJldHVybiB0aGlzLl9oaWRlQ2xvc2U7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihwb0xhbmd1YWdlU2VydmljZTogUG9MYW5ndWFnZVNlcnZpY2UpIHtcbiAgICB0aGlzLmxhbmd1YWdlID0gcG9MYW5ndWFnZVNlcnZpY2UuZ2V0U2hvcnRMYW5ndWFnZSgpO1xuXG4gICAgdGhpcy5saXRlcmFscyA9IHtcbiAgICAgIC4uLnBvTW9kYWxMaXRlcmFsc1t0aGlzLmxhbmd1YWdlXVxuICAgIH07XG4gIH1cblxuICAvKiogRnVuw6fDo28gcGFyYSBmZWNoYXIgYSBtb2RhbC4gKi9cbiAgY2xvc2UoeENsb3NlZCA9IGZhbHNlKTogdm9pZCB7XG4gICAgdGhpcy5pc0hpZGRlbiA9IHRydWU7XG4gICAgaWYgKHhDbG9zZWQpIHtcbiAgICAgIHRoaXMub25YQ2xvc2VkLmVtaXQoeENsb3NlZCk7XG4gICAgfVxuICB9XG5cbiAgLyoqIEZ1bsOnw6NvIHBhcmEgYWJyaXIgYSBtb2RhbC4gKi9cbiAgb3BlbigpOiB2b2lkIHtcbiAgICB0aGlzLnZhbGlkUHJpbWFyeUFjdGlvbigpO1xuXG4gICAgdGhpcy5pc0hpZGRlbiA9IGZhbHNlO1xuICB9XG5cbiAgdmFsaWRQcmltYXJ5QWN0aW9uKCkge1xuICAgIGlmICghdGhpcy5wcmltYXJ5QWN0aW9uKSB7XG4gICAgICB0aGlzLnByaW1hcnlBY3Rpb24gPSB7XG4gICAgICAgIGFjdGlvbjogKCkgPT4gdGhpcy5jbG9zZSgpLFxuICAgICAgICBsYWJlbDogdGhpcy5saXRlcmFscy5jbG9zZVxuICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMucHJpbWFyeUFjdGlvblsnYWN0aW9uJ10pIHtcbiAgICAgIHRoaXMucHJpbWFyeUFjdGlvblsnYWN0aW9uJ10gPSAoKSA9PiB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICAgIGlmICghdGhpcy5wcmltYXJ5QWN0aW9uWydsYWJlbCddKSB7XG4gICAgICB0aGlzLnByaW1hcnlBY3Rpb25bJ2xhYmVsJ10gPSB0aGlzLmxpdGVyYWxzLmNsb3NlO1xuICAgIH1cbiAgfVxufVxuIl19