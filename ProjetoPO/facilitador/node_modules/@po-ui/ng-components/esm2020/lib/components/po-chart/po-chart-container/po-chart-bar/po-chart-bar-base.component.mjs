import { Directive, EventEmitter, Input, Output } from '@angular/core';
import * as i0 from "@angular/core";
import * as i1 from "../../services/po-chart-maths.service";
export class PoChartBarBaseComponent {
    constructor(mathsService) {
        this.mathsService = mathsService;
        this.barClick = new EventEmitter();
        this.barHover = new EventEmitter();
        this._containerSize = {};
        this._range = {};
        this._series = [];
    }
    set range(value) {
        if (value instanceof Object && !(value instanceof Array)) {
            this._range = value;
            this.calculateSeriesPathsCoordinates(this.containerSize, this._series, this._range);
        }
    }
    get range() {
        return this._range;
    }
    set containerSize(value) {
        this._containerSize = value;
        this.calculateSeriesPathsCoordinates(this._containerSize, this.series, this.range);
    }
    get containerSize() {
        return this._containerSize;
    }
    set series(seriesList) {
        const seriesDataArrayFilter = seriesList.filter(serie => Array.isArray(serie.data));
        if (seriesDataArrayFilter.length) {
            this._series = seriesDataArrayFilter;
            this.seriesGreaterLength = this.mathsService.seriesGreaterLength(this.series);
            this.calculateSeriesPathsCoordinates(this.containerSize, seriesDataArrayFilter, this.range);
        }
        else {
            this._series = [];
        }
    }
    get series() {
        return this._series;
    }
    onSerieBarClick(selectedItem) {
        this.barClick.emit(selectedItem);
    }
    onSerieBarHover(selectedItem) {
        this.barHover.emit(selectedItem);
    }
    trackBy(index) {
        return index;
    }
    calculateSeriesPathsCoordinates(containerSize, series, range) {
        this.seriesPathsCoordinates = series.map((serie, seriesIndex) => {
            if (Array.isArray(serie.data)) {
                let pathCoordinates = [];
                serie.data.forEach((data, serieDataIndex) => {
                    if (this.mathsService.verifyIfFloatOrInteger(data)) {
                        const coordinates = this.barCoordinates(seriesIndex, serieDataIndex, containerSize, range, data);
                        const category = this.serieCategory(serieDataIndex, this.categories);
                        const label = serie['label'];
                        const color = serie['color'];
                        const tooltip = serie['tooltip'];
                        const tooltipLabel = this.getTooltipLabel(data, label, tooltip);
                        pathCoordinates = [...pathCoordinates, { category, color, label, tooltipLabel, data, coordinates }];
                    }
                });
                return pathCoordinates;
            }
        });
    }
    getTooltipLabel(data, label, tooltipLabel) {
        const dataLabel = label ? `${label}: ` : '';
        const dataValue = data.toString();
        return tooltipLabel || `${dataLabel}${dataValue}`;
    }
    serieCategory(index, categories = []) {
        return categories[index] ?? undefined;
    }
}
PoChartBarBaseComponent.ɵfac = function PoChartBarBaseComponent_Factory(t) { return new (t || PoChartBarBaseComponent)(i0.ɵɵdirectiveInject(i1.PoChartMathsService)); };
PoChartBarBaseComponent.ɵdir = /*@__PURE__*/ i0.ɵɵdefineDirective({ type: PoChartBarBaseComponent, inputs: { categories: ["p-categories", "categories"], range: ["p-range", "range"], containerSize: ["p-container-size", "containerSize"], series: ["p-series", "series"] }, outputs: { barClick: "p-bar-click", barHover: "p-bar-hover" } });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && i0.ɵsetClassMetadata(PoChartBarBaseComponent, [{
        type: Directive
    }], function () { return [{ type: i1.PoChartMathsService }]; }, { categories: [{
            type: Input,
            args: ['p-categories']
        }], barClick: [{
            type: Output,
            args: ['p-bar-click']
        }], barHover: [{
            type: Output,
            args: ['p-bar-hover']
        }], range: [{
            type: Input,
            args: ['p-range']
        }], containerSize: [{
            type: Input,
            args: ['p-container-size']
        }], series: [{
            type: Input,
            args: ['p-series']
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tY2hhcnQtYmFyLWJhc2UuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvdWkvc3JjL2xpYi9jb21wb25lbnRzL3BvLWNoYXJ0L3BvLWNoYXJ0LWNvbnRhaW5lci9wby1jaGFydC1iYXIvcG8tY2hhcnQtYmFyLWJhc2UuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxlQUFlLENBQUM7OztBQVV2RSxNQUFNLE9BQWdCLHVCQUF1QjtJQXFEM0MsWUFBc0IsWUFBaUM7UUFBakMsaUJBQVksR0FBWixZQUFZLENBQXFCO1FBbERoQyxhQUFRLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUVuQyxhQUFRLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQU1sRCxtQkFBYyxHQUF5QixFQUFFLENBQUM7UUFDMUMsV0FBTSxHQUF3QixFQUFFLENBQUM7UUFDakMsWUFBTyxHQUF3QixFQUFFLENBQUM7SUF3Q2dCLENBQUM7SUF0QzNELElBQXNCLEtBQUssQ0FBQyxLQUEwQjtRQUNwRCxJQUFJLEtBQUssWUFBWSxNQUFNLElBQUksQ0FBQyxDQUFDLEtBQUssWUFBWSxLQUFLLENBQUMsRUFBRTtZQUN4RCxJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztZQUVwQixJQUFJLENBQUMsK0JBQStCLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUNyRjtJQUNILENBQUM7SUFFRCxJQUFJLEtBQUs7UUFDUCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDckIsQ0FBQztJQUVELElBQStCLGFBQWEsQ0FBQyxLQUEyQjtRQUN0RSxJQUFJLENBQUMsY0FBYyxHQUFHLEtBQUssQ0FB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Q0wsQ0FBQztJQUVPLGVBQWUsQ0FBQyxJQUFZLEVBQUUsS0FBYSxFQUFFLFlBQW9CO1FBQ3ZFLE1BQU0sU0FBUyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQzVDLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUVsQyxPQUFPLFlBQVksSUFBSSxHQUFHLFNBQVMsR0FBRyxTQUFTLEVBQUUsQ0FBQztJQUNwRCxDQUFDO0lBRU8sYUFBYSxDQUFDLEtBQWEsRUFBRSxhQUE0QixFQUFFO1FBQ2pFLE9BQU8sVUFBVSxDQUFDLEtBQUssQ0FBQyxJQUFJLFNBQVMsQ0FBQztJQUN4QyxDQUFDOzs4RkF4R21CLHVCQUF1QjswRUFBdkIsdUJBQXVCO3VGQUF2Qix1QkFBdUI7Y0FENUMsU0FBUztzRUFFZSxVQUFVO2tCQUFoQyxLQUFLO21CQUFDLGNBQWM7WUFFRSxRQUFRO2tCQUE5QixNQUFNO21CQUFDLGFBQWE7WUFFRSxRQUFRO2tCQUE5QixNQUFNO21CQUFDLGFBQWE7WUFVQyxLQUFLO2tCQUExQixLQUFLO21CQUFDLFNBQVM7WUFZZSxhQUFhO2tCQUEzQyxLQUFLO21CQUFDLGtCQUFrQjtZQVVGLE1BQU07a0JBQTVCLEtBQUs7bUJBQUMsVUFBVSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERpcmVjdGl2ZSwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT3V0cHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IFBvQ2hhcnRNYXRoc1NlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9wby1jaGFydC1tYXRocy5zZXJ2aWNlJztcblxuaW1wb3J0IHsgUG9DaGFydENvbnRhaW5lclNpemUgfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL3BvLWNoYXJ0LWNvbnRhaW5lci1zaXplLmludGVyZmFjZSc7XG5pbXBvcnQgeyBQb0NoYXJ0TWluTWF4VmFsdWVzIH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcy9wby1jaGFydC1taW4tbWF4LXZhbHVlcy5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgUG9DaGFydEJhckNvb3JkaW5hdGVzIH0gZnJvbSAnLi4vLi4vaW50ZXJmYWNlcy9wby1jaGFydC1iYXItY29vcmRpbmF0ZXMuaW50ZXJmYWNlJztcbmltcG9ydCB7IFBvQ2hhcnRTZXJpZSB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvcG8tY2hhcnQtc2VyaWUuaW50ZXJmYWNlJztcblxuQERpcmVjdGl2ZSgpXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgUG9DaGFydEJhckJhc2VDb21wb25lbnQge1xuICBASW5wdXQoJ3AtY2F0ZWdvcmllcycpIGNhdGVnb3JpZXM6IEFycmF5PHN0cmluZz47XG5cbiAgQE91dHB1dCgncC1iYXItY2xpY2snKSBiYXJDbGljayA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIEBPdXRwdXQoJ3AtYmFyLWhvdmVyJykgYmFySG92ZXIgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICBzZXJpZXNQYXRoc0Nvb3JkaW5hdGVzOiBBcnJheTxBcnJheTxQb0NoYXJ0QmFyQ29vcmRpbmF0ZXM+PjtcblxuICBwcm90ZWN0ZWQgc2VyaWVzR3JlYXRlckxlbmd0aDogbnVtYmVyO1xuXG4gIHByaXZhdGUgX2NvbnRhaW5lclNpemU6IFBvQ2hhcnRDb250YWluZXJTaXplID0ge307XG4gIHByaXZhdGUgX3JhbmdlOiBQb0NoYXJ0TWluTWF4VmFsdWVzID0ge307XG4gIHByaXZhdGUgX3NlcmllczogQXJyYXk8UG9DaGFydFNlcmllPiA9IFtdO1xuXG4gIEBJbnB1dCgncC1yYW5nZScpIHNldCByYW5nZSh2YWx1ZTogUG9DaGFydE1pbk1heFZhbHVlcykge1xuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIE9iamVjdCAmJiAhKHZhbHVlIGluc3RhbmNlb2YgQXJyYXkpKSB7XG4gICAgICB0aGlzLl9yYW5nZSA9IHZhbHVlO1xuXG4gICAgICB0aGlzLmNhbGN1bGF0ZVNlcmllc1BhdGhzQ29vcmRpbmF0ZXModGhpcy5jb250YWluZXJTaXplLCB0aGlzLl9zZXJpZXMsIHRoaXMuX3JhbmdlKTtcbiAgICB9XG4gIH1cblxuICBnZXQgcmFuZ2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JhbmdlO1xuICB9XG5cbiAgQElucHV0KCdwLWNvbnRhaW5lci1zaXplJykgc2V0IGNvbnRhaW5lclNpemUodmFsdWU6IFBvQ2hhcnRDb250YWluZXJTaXplKSB7XG4gICAgdGhpcy5fY29udGFpbmVyU2l6ZSA9IHZhbHVlO1xuXG4gICAgdGhpcy5jYWxjdWxhdGVTZXJpZXNQYXRoc0Nvb3JkaW5hdGVzKHRoaXMuX2NvbnRhaW5lclNpemUsIHRoaXMuc2VyaWVzLCB0aGlzLnJhbmdlKTtcbiAgfVxuXG4gIGdldCBjb250YWluZXJTaXplKCkge1xuICAgIHJldHVybiB0aGlzLl9jb250YWluZXJTaXplO1xuICB9XG5cbiAgQElucHV0KCdwLXNlcmllcycpIHNldCBzZXJpZXMoc2VyaWVzTGlzdDogQXJyYXk8UG9DaGFydFNlcmllPikge1xuICAgIGNvbnN0IHNlcmllc0RhdGFBcnJheUZpbHRlciA9IHNlcmllc0xpc3QuZmlsdGVyKHNlcmllID0+IEFycmF5LmlzQXJyYXkoc2VyaWUuZGF0YSkpO1xuXG4gICAgaWYgKHNlcmllc0RhdGFBcnJheUZpbHRlci5sZW5ndGgpIHtcbiAgICAgIHRoaXMuX3NlcmllcyA9IHNlcmllc0RhdGFBcnJheUZpbHRlcjtcbiAgICAgIHRoaXMuc2VyaWVzR3JlYXRlckxlbmd0aCA9IHRoaXMubWF0aHNTZXJ2aWNlLnNlcmllc0dyZWF0ZXJMZW5ndGgodGhpcy5zZXJpZXMpO1xuICAgICAgdGhpcy5jYWxjdWxhdGVTZXJpZXNQYXRoc0Nvb3JkaW5hdGVzKHRoaXMuY29udGFpbmVyU2l6ZSwgc2VyaWVzRGF0YUFycmF5RmlsdGVyLCB0aGlzLnJhbmdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc2VyaWVzID0gW107XG4gICAgfVxuICB9XG5cbiAgZ2V0IHNlcmllcygpIHtcbiAgICByZXR1cm4gdGhpcy5fc2VyaWVzO1xuICB9XG5cbiAgY29uc3RydWN0b3IocHJvdGVjdGVkIG1hdGhzU2VydmljZTogUG9DaGFydE1hdGhzU2VydmljZSkge31cblxuICBvblNlcmllQmFyQ2xpY2soc2VsZWN0ZWRJdGVtOiBhbnkpIHtcbiAgICB0aGlzLmJhckNsaWNrLmVtaXQoc2VsZWN0ZWRJdGVtKTtcbiAgfVxuXG4gIG9uU2VyaWVCYXJIb3ZlcihzZWxlY3RlZEl0ZW06IGFueSkge1xuICAgIHRoaXMuYmFySG92ZXIuZW1pdChzZWxlY3RlZEl0ZW0pO1xuICB9XG5cbiAgdHJhY2tCeShpbmRleCkge1xuICAgIHJldHVybiBpbmRleDtcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlU2VyaWVzUGF0aHNDb29yZGluYXRlcyhcbiAgICBjb250YWluZXJTaXplOiBQb0NoYXJ0Q29udGFpbmVyU2l6ZSxcbiAgICBzZXJpZXM6IEFycmF5PFBvQ2hhcnRTZXJpZT4sXG4gICAgcmFuZ2U6IFBvQ2hhcnRNaW5NYXhWYWx1ZXNcbiAgKSB7XG4gICAgdGhpcy5zZXJpZXNQYXRoc0Nvb3JkaW5hdGVzID0gc2VyaWVzLm1hcCgoc2VyaWU6IFBvQ2hhcnRTZXJpZSwgc2VyaWVzSW5kZXgpID0+IHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHNlcmllLmRhdGEpKSB7XG4gICAgICAgIGxldCBwYXRoQ29vcmRpbmF0ZXM6IEFycmF5PFBvQ2hhcnRCYXJDb29yZGluYXRlcz4gPSBbXTtcblxuICAgICAgICBzZXJpZS5kYXRhLmZvckVhY2goKGRhdGEsIHNlcmllRGF0YUluZGV4KSA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMubWF0aHNTZXJ2aWNlLnZlcmlmeUlmRmxvYXRPckludGVnZXIoZGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvb3JkaW5hdGVzID0gdGhpcy5iYXJDb29yZGluYXRlcyhzZXJpZXNJbmRleCwgc2VyaWVEYXRhSW5kZXgsIGNvbnRhaW5lclNpemUsIHJhbmdlLCBkYXRhKTtcblxuICAgICAgICAgICAgY29uc3QgY2F0ZWdvcnkgPSB0aGlzLnNlcmllQ2F0ZWdvcnkoc2VyaWVEYXRhSW5kZXgsIHRoaXMuY2F0ZWdvcmllcyk7XG4gICAgICAgICAgICBjb25zdCBsYWJlbCA9IHNlcmllWydsYWJlbCddO1xuICAgICAgICAgICAgY29uc3QgY29sb3IgPSBzZXJpZVsnY29sb3InXTtcbiAgICAgICAgICAgIGNvbnN0IHRvb2x0aXAgPSBzZXJpZVsndG9vbHRpcCddO1xuICAgICAgICAgICAgY29uc3QgdG9vbHRpcExhYmVsID0gdGhpcy5nZXRUb29sdGlwTGFiZWwoZGF0YSwgbGFiZWwsIHRvb2x0aXApO1xuXG4gICAgICAgICAgICBwYXRoQ29vcmRpbmF0ZXMgPSBbLi4ucGF0aENvb3JkaW5hdGVzLCB7IGNhdGVnb3J5LCBjb2xvciwgbGFiZWwsIHRvb2x0aXBMYWJlbCwgZGF0YSwgY29vcmRpbmF0ZXMgfV07XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcGF0aENvb3JkaW5hdGVzO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRUb29sdGlwTGFiZWwoZGF0YTogbnVtYmVyLCBsYWJlbDogc3RyaW5nLCB0b29sdGlwTGFiZWw6IHN0cmluZykge1xuICAgIGNvbnN0IGRhdGFMYWJlbCA9IGxhYmVsID8gYCR7bGFiZWx9OiBgIDogJyc7XG4gICAgY29uc3QgZGF0YVZhbHVlID0gZGF0YS50b1N0cmluZygpO1xuXG4gICAgcmV0dXJuIHRvb2x0aXBMYWJlbCB8fCBgJHtkYXRhTGFiZWx9JHtkYXRhVmFsdWV9YDtcbiAgfVxuXG4gIHByaXZhdGUgc2VyaWVDYXRlZ29yeShpbmRleDogbnVtYmVyLCBjYXRlZ29yaWVzOiBBcnJheTxzdHJpbmc+ID0gW10pIHtcbiAgICByZXR1cm4gY2F0ZWdvcmllc1tpbmRleF0gPz8gdW5kZWZpbmVkO1xuICB9XG5cbiAgcHJvdGVjdGVkIGFic3RyYWN0IGJhckNvb3JkaW5hdGVzKFxuICAgIHNlcmllc0luZGV4OiBudW1iZXIsXG4gICAgc2VyaWVEYXRhSW5kZXg6IG51bWJlcixcbiAgICBjb250YWluZXJTaXplOiBQb0NoYXJ0Q29udGFpbmVyU2l6ZSxcbiAgICByYW5nZTogUG9DaGFydE1pbk1heFZhbHVlcyxcbiAgICBzZXJpZVZhbHVlOiBudW1iZXJcbiAgKTtcbn1cbiJdfQ==